import{P as Ka}from"./PaginationComponent-f45314c4.js";import{H as Ja,I as Ve,J as Hr,K as Fr,_ as jr,r as Ze,o as E,B as Qa,e as Xa,b as f,c as R,d as W,n as Ot,f as xr,t as Fe,k as bn,v as Vr,h as wr,F as yn,G as zr,M as Za}from"./index-02c95cdd.js";import{E as Ya,t as eo}from"./Editor-c8eb2373.js";const{VITE_URL:ze,VITE_PATH:He}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"healing_chou",BASE_URL:"/HealingChou/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Cn=Ja("adminCoursesStore",{state:()=>({tempCourse:{imagesUrl:[""]},courses:[],services:[],service_pagination:{},course_pagination:{}}),actions:{getAdminServices(d=1){Ve.get(`${ze}/api/${He}/admin/products?page=${d}&category=service`).then(p=>{this.services=p.data.products,this.service_pagination=p.data.pagination}).catch(p=>{alert(p.response.data.message)})},getAdminCourses(d=1){Ve.get(`${ze}/api/${He}/admin/products?page=${d}&category=course`).then(p=>{this.courses=p.data.products,this.course_pagination=p.data.pagination}).catch(p=>{alert(p.response.data.message)})},addCourse(d,p){Ve.post(`${ze}/api/${He}/admin/product`,{data:d}).then(k=>{this.clearInputs(),p.hide(),alert(k.data.message),this.tempCourse={imagesUrl:[""]},d.category=="service"?this.getAdminServices():this.getAdminCourses()}).catch(k=>{alert(k.response.data.message)})},editCourse(d,p){d.price=parseInt(d.price),Ve.put(`${ze}/api/${He}/admin/product/${d.id}`,{data:d}).then(k=>{this.clearInputs(),p.hide(),alert(k.data.message),this.tempCourse={imagesUrl:[""]},d.category=="service"?this.getAdminServices():this.getAdminCourses()}).catch(k=>{alert(k.response.data.message)})},deleteCourse(d,p){window.confirm("確定要刪除?")&&Ve.delete(`${ze}/api/${He}/admin/product/${p}`).then(()=>{d=="service"?this.getAdminServices():d=="course"&&this.getAdminCourses()}).catch(k=>{console.dir(k)})},uploadImage(){const p=document.querySelector("#imageUpload").files[0],k=new FormData;k.append("file-to-upload",p),Ve.post(`${ze}/api/${He}/admin/upload`,k).then(U=>{this.tempCourse.imageUrl=U.data.imageUrl}).catch(U=>{console.log(U.response)})},uploadImages(d){const k=document.querySelectorAll(".imagesUpload")[d].files[0],U=new FormData;U.append("file-to-upload",k),Ve.post(`${ze}/api/${He}/admin/upload`,U).then(M=>{this.tempCourse.imagesUrl[d]=M.data.imageUrl}).catch(M=>{console.log(M.response)})},clearInputs(){document.querySelector("#imageUrl").value=null,Array.isArray(this.tempCourse.imagesUrl)&&(this.images=[...document.querySelectorAll("#imagesUrl")],this.images.forEach(function(d){d.value=null}))},selectTempCourse(d){this.tempCourse=d}}});(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},k=function(e){return function(n){return p(n)===e}},U=function(e){return function(n){return typeof n===e}},M=k("string"),ie=k("object"),w=k("array"),P=U("boolean"),D=U("function"),G=U("number"),H=function(){},g=function(e){return function(){return e}},x=function(e){return e},se=function(e,n){return e===n},je=function(e){return function(n){return!e(n)}},ve=g(!1),X=g(!0),we=function(){return me},me=function(){var e=function(o){return o()},n=x,r={fold:function(o,s){return o()},isSome:ve,isNone:X,getOr:n,getOrThunk:e,getOrDie:function(o){throw new Error(o||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:n,orThunk:e,map:we,each:H,bind:we,exists:ve,forall:X,filter:function(){return we()},toArray:function(){return[]},toString:g("none()")};return r}(),pe=function(e){var n=g(e),r=function(){return s},o=function(l){return l(e)},s={fold:function(l,m){return m(e)},isSome:X,isNone:ve,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(l){return pe(l(e))},each:function(l){l(e)},bind:o,exists:o,forall:o,filter:function(l){return l(e)?s:me},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return s},De=function(e){return e==null?me:pe(e)},O={some:pe,none:we,from:De},ke=Array.prototype.slice,qe=Array.prototype.push,N=function(e,n){for(var r=e.length,o=new Array(r),s=0;s<r;s++){var l=e[s];o[s]=n(l,s)}return o},F=function(e,n){for(var r=0,o=e.length;r<o;r++){var s=e[r];n(s,r)}},re=function(e,n){for(var r=[],o=0,s=e.length;o<s;o++){var l=e[o];n(l,o)&&r.push(l)}return r},Ye=function(e,n){if(e.length===0)return[];for(var r=n(e[0]),o=[],s=[],l=0,m=e.length;l<m;l++){var b=e[l],C=n(b);C!==r&&(o.push(s),s=[]),r=C,s.push(b)}return s.length!==0&&o.push(s),o},Ne=function(e,n,r){return F(e,function(o,s){r=n(r,o,s)}),r},v=function(e,n,r){for(var o=0,s=e.length;o<s;o++){var l=e[o];if(n(l,o))return O.some(l);if(r(l,o))break}return O.none()},y=function(e,n){return v(e,n,ve)},L=function(e){for(var n=[],r=0,o=e.length;r<o;++r){if(!w(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);qe.apply(n,e[r])}return n},A=function(e,n){return L(N(e,n))},_=function(e){var n=ke.call(e,0);return n.reverse(),n},$=function(e,n){return n>=0&&n<e.length?O.some(e[n]):O.none()},Z=function(e){return $(e,0)},Y=function(e){return $(e,e.length-1)},ee=function(e,n){for(var r=0;r<e.length;r++){var o=n(e[r],r);if(o.isSome())return o}return O.none()},_e=function(){return _e=Object.assign||function(n){for(var r,o=1,s=arguments.length;o<s;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},_e.apply(this,arguments)};function We(e,n,r){if(r||arguments.length===2)for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var et=function(e){var n=!1,r;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n||(n=!0,r=e.apply(null,o)),r}},tt=function(e,n,r,o){var s=e.isiOS()&&/ipad/i.test(r)===!0,l=e.isiOS()&&!s,m=e.isiOS()||e.isAndroid(),b=m||o("(pointer:coarse)"),C=s||!l&&m&&o("(min-device-width:768px)"),T=l||m&&!C,I=n.isSafari()&&e.isiOS()&&/safari/i.test(r)===!1,ne=!T&&!C&&!I;return{isiPad:g(s),isiPhone:g(l),isTablet:g(C),isPhone:g(T),isTouch:g(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:g(I),isDesktop:g(ne)}},Sn=function(e,n){for(var r=0;r<e.length;r++){var o=e[r];if(o.test(n))return o}},Tn=function(e,n){var r=Sn(e,n);if(!r)return{major:0,minor:0};var o=function(s){return Number(n.replace(r,"$"+s))};return Ue(o(1),o(2))},$e=function(e,n){var r=String(n).toLowerCase();return e.length===0?It():Tn(e,r)},It=function(){return Ue(0,0)},Ue=function(e,n){return{major:e,minor:n}},Pe={nu:Ue,detect:$e,unknown:It},ue=function(e,n){return ee(n.brands,function(r){var o=r.brand.toLowerCase();return y(e,function(s){var l;return o===((l=s.brand)===null||l===void 0?void 0:l.toLowerCase())}).map(function(s){return{current:s.name,version:Pe.nu(parseInt(r.version,10),0)}})})},kt=function(e,n){var r=String(n).toLowerCase();return y(e,function(o){return o.search(r)})},Ln=function(e,n){return kt(e,n).map(function(r){var o=Pe.detect(r.versionRegexes,n);return{current:r.name,version:o}})},Nt=function(e,n){return kt(e,n).map(function(r){var o=Pe.detect(r.versionRegexes,n);return{current:r.name,version:o}})},V=function(e,n){return e.indexOf(n)!==-1},An=function(e){return function(n){return n.replace(e,"")}},wn=An(/^\s+|\s+$/g),Dn=function(e){return e.length>0},On=function(e){return!Dn(e)},nt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ae=function(e){return function(n){return V(n,e)}},In=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return V(e,"edge/")&&V(e,"chrome")&&V(e,"safari")&&V(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nt],search:function(e){return V(e,"chrome")&&!V(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return V(e,"msie")||V(e,"trident")}},{name:"Opera",versionRegexes:[nt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ae("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ae("firefox")},{name:"Safari",versionRegexes:[nt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(V(e,"safari")||V(e,"mobile/"))&&V(e,"applewebkit")}}],kn=[{name:"Windows",search:ae("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return V(e,"iphone")||V(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ae("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ae("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ae("linux"),versionRegexes:[]},{name:"Solaris",search:ae("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ae("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ae("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_t={browsers:g(In),oses:g(kn)},$t="Edge",Ut="Chrome",rt="IE",Pt="Opera",le="Firefox",Be="Safari",Bt=function(){return Et({current:void 0,version:Pe.unknown()})},Et=function(e){var n=e.current,r=e.version,o=function(s){return function(){return n===s}};return{current:n,version:r,isEdge:o($t),isChrome:o(Ut),isIE:o(rt),isOpera:o(Pt),isFirefox:o(le),isSafari:o(Be)}},Mt={unknown:Bt,nu:Et,edge:g($t),chrome:g(Ut),ie:g(rt),opera:g(Pt),firefox:g(le),safari:g(Be)},Rt="Windows",at="iOS",ot="Android",j="Linux",it="OSX",st="Solaris",ut="FreeBSD",ge="ChromeOS",xt=function(){return lt({current:void 0,version:Pe.unknown()})},lt=function(e){var n=e.current,r=e.version,o=function(s){return function(){return n===s}};return{current:n,version:r,isWindows:o(Rt),isiOS:o(at),isAndroid:o(ot),isOSX:o(it),isLinux:o(j),isSolaris:o(st),isFreeBSD:o(ut),isChromeOS:o(ge)}},he={unknown:xt,nu:lt,windows:g(Rt),ios:g(at),android:g(ot),linux:g(j),osx:g(it),solaris:g(st),freebsd:g(ut),chromeos:g(ge)},Nn=function(e,n,r){var o=_t.browsers(),s=_t.oses(),l=n.bind(function(C){return ue(o,C)}).orThunk(function(){return Ln(o,e)}).fold(Mt.unknown,Mt.nu),m=Nt(s,e).fold(he.unknown,he.nu),b=tt(m,l,e,r);return{browser:l,os:m,deviceType:b}},_n={detect:Nn},$n=function(e){return window.matchMedia(e).matches},Vt=et(function(){return _n.detect(navigator.userAgent,O.from(navigator.userAgentData),$n)}),zt=function(){return Vt()},Ht=function(e,n,r){return(e.compareDocumentPosition(n)&r)!==0},Ft=function(e,n){return Ht(e,n,Node.DOCUMENT_POSITION_CONTAINED_BY)},ct=1,jt=function(e,n){var r=n||document,o=r.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return be(o.childNodes[0])},qt=function(e,n){var r=n||document,o=r.createElement(e);return be(o)},Un=function(e,n){var r=n||document,o=r.createTextNode(e);return be(o)},be=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Pn=function(e,n,r){return O.from(e.dom.elementFromPoint(n,r)).map(be)},B={fromHtml:jt,fromTag:qt,fromText:Un,fromDom:be,fromPoint:Pn},Bn=function(e,n){var r=e.dom;if(r.nodeType!==ct)return!1;var o=r;if(o.matches!==void 0)return o.matches(n);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(n);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},ft=function(e,n){return e.dom===n.dom},En=function(e,n){var r=e.dom,o=n.dom;return r===o?!1:r.contains(o)},Mn=function(e,n){return Ft(e.dom,n.dom)},dt=function(e,n){return zt().browser.isIE()?Mn(e,n):En(e,n)},K=Bn,vt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Rn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ce=tinymce.util.Tools.resolve("tinymce.util.VK"),Wt=Object.keys,ye=function(e,n){for(var r=Wt(e),o=0,s=r.length;o<s;o++){var l=r[o],m=e[l];n(m,l)}},Ge=function(e){return function(n,r){e[r]=n}},Gt=function(e,n,r,o){var s={};return ye(e,function(l,m){(n(l,m)?r:o)(l,m)}),s},xn=function(e,n){var r={};return Gt(e,n,Ge(r),H),r};typeof window<"u"||Function("return this;")();var mt=function(e){var n=e.dom.nodeName;return n.toLowerCase()},Vn=function(e){return e.dom.nodeType},zn=function(e){return function(n){return Vn(n)===e}},Kt=zn(ct),Jt=function(e){return function(n){return Kt(n)&&mt(n)===e}},Hn=function(e,n,r){if(M(r)||P(r)||G(r))e.setAttribute(n,r+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple")},Ee=function(e,n){var r=e.dom;ye(n,function(o,s){Hn(r,s,o)})},pt=function(e){return Ne(e.dom.attributes,function(n,r){return n[r.name]=r.value,n},{})},Ce=function(e){return O.from(e.dom.parentNode).map(B.fromDom)},gt=function(e){return N(e.dom.childNodes,B.fromDom)},Qt=function(e,n){var r=e.dom.childNodes;return O.from(r[n]).map(B.fromDom)},ht=function(e){return Qt(e,0)},bt=function(e){return Qt(e,e.dom.childNodes.length-1)},Xt=function(e,n){var r=Ce(e);r.each(function(o){o.dom.insertBefore(n.dom,e.dom)})},Me=function(e,n){e.dom.appendChild(n.dom)},Zt=function(e,n){F(n,function(r){Xt(e,r)})},yt=function(e,n){F(n,function(r){Me(e,r)})},Yt=function(e){var n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},en=function(e,n){return B.fromDom(e.dom.cloneNode(n))},Fn=function(e){return en(e,!0)},Oe=function(e,n){var r=B.fromTag(n),o=pt(e);return Ee(r,o),r},Ct=function(e,n){var r=Oe(e,n);Xt(e,r);var o=gt(e);return yt(r,o),Yt(e),r},St=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),te=tinymce.util.Tools.resolve("tinymce.util.Tools"),Tt=function(e){return function(n){return n&&n.nodeName.toLowerCase()===e}},Re=function(e){return function(n){return n&&e.test(n.nodeName)}},Se=function(e){return e&&e.nodeType===3},J=Re(/^(OL|UL|DL)$/),jn=Re(/^(OL|UL)$/),tn=Tt("ol"),Ke=Re(/^(LI|DT|DD)$/),nn=Re(/^(DT|DD)$/),qn=Re(/^(TH|TD)$/),Te=Tt("br"),Wn=function(e){return e.parentNode.firstChild===e},Lt=function(e,n){return n&&!!e.schema.getTextBlockElements()[n.nodeName]},rn=function(e,n){return e&&e.nodeName in n},Gn=function(e,n){return Te(n)?e.isBlock(n.nextSibling)&&!Te(n.previousSibling):!1},oe=function(e,n,r){var o=e.isEmpty(n);return r&&e.select("span[data-mce-type=bookmark]",n).length>0?!1:o},an=function(e,n){return e.isChildOf(n,e.getRoot())},Kn=function(e){return e.getParam("lists_indent_on_tab",!0)},Jn=function(e){var n=e.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},Qn=function(e){return e.getParam("forced_root_block_attrs",{})},on=function(e,n){var r=e.dom,o=e.schema.getBlockElements(),s=r.createFragment(),l=Jn(e),m,b,C;if(l&&(b=r.create(l),b.tagName===l.toUpperCase()&&r.setAttribs(b,Qn(e)),rn(n.firstChild,o)||s.appendChild(b)),n)for(;m=n.firstChild;){var T=m.nodeName;!C&&(T!=="SPAN"||m.getAttribute("data-mce-type")!=="bookmark")&&(C=!0),rn(m,o)?(s.appendChild(m),b=null):l?(b||(b=r.create(l),s.appendChild(b)),b.appendChild(m)):s.appendChild(m)}return l?C||b.appendChild(r.create("br",{"data-mce-bogus":"1"})):s.appendChild(r.create("br")),s},fe=St.DOM,Xn=function(e,n,r){var o=function(T){te.each(s,function(I){T.parentNode.insertBefore(I,r.parentNode)}),fe.remove(T)},s=fe.select('span[data-mce-type="bookmark"]',n),l=on(e,r),m=fe.createRng();m.setStartAfter(r),m.setEndAfter(n);for(var b=m.extractContents(),C=b.firstChild;C;C=C.firstChild)if(C.nodeName==="LI"&&e.dom.isEmpty(C)){fe.remove(C);break}e.dom.isEmpty(b)||fe.insertAfter(b,n),fe.insertAfter(l,n),oe(e.dom,r.parentNode)&&o(r.parentNode),fe.remove(r),oe(e.dom,n)&&fe.remove(n)},Zn=Jt("dd"),sn=Jt("dt"),Yn=function(e,n){Zn(n)?Ct(n,"dt"):sn(n)&&Ce(n).each(function(r){return Xn(e,r.dom,n.dom)})},er=function(e){sn(e)&&Ct(e,"dd")},tr=function(e,n,r){n==="Indent"?F(r,er):F(r,function(o){return Yn(e,o)})},un=function(e,n){if(Se(e))return{container:e,offset:n};var r=vt.getNode(e,n);return Se(r)?{container:r,offset:n>=e.childNodes.length?r.data.length:0}:r.previousSibling&&Se(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&Se(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:n}},Je=function(e){var n=e.cloneRange(),r=un(e.startContainer,e.startOffset);n.setStart(r.container,r.offset);var o=un(e.endContainer,e.endOffset);return n.setEnd(o.container,o.offset),n},ln=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Ie=function(e,n){var r=n||e.selection.getStart(!0);return e.dom.getParent(r,"OL,UL,DL",Le(e,r))},nr=function(e,n){return e&&n.length===1&&n[0]===e},rr=function(e){return re(e.querySelectorAll("ol,ul,dl"),J)},ar=function(e){var n=Ie(e),r=e.selection.getSelectedBlocks();return nr(n,r)?rr(n):re(r,function(o){return J(o)&&n!==o})},or=function(e,n){var r=te.map(n,function(o){var s=e.dom.getParent(o,"li,dd,dt",Le(e,o));return s||o});return ln.unique(r)},At=function(e){var n=e.selection.getSelectedBlocks();return re(or(e,n),Ke)},ir=function(e){return re(At(e),nn)},Le=function(e,n){var r=e.dom.getParents(n,"TD,TH");return r.length>0?r[0]:e.getBody()},Qe=function(e,n){var r=e.dom.getParents(n,"ol,ul",Le(e,n));return Y(r)},sr=function(e){var n=Qe(e,e.selection.getStart()),r=re(e.selection.getSelectedBlocks(),jn);return n.toArray().concat(r)},ur=function(e){var n=sr(e);return cn(e,n)},cn=function(e,n){var r=N(n,function(o){return Qe(e,o).getOr(o)});return ln.unique(r)},fn=function(e,n,r){return r===void 0&&(r=se),e.exists(function(o){return r(o,n)})},dn=function(e,n,r){return e.isSome()&&n.isSome()?O.some(r(e.getOrDie(),n.getOrDie())):O.none()},lr=function(e,n){var r=n||document,o=r.createDocumentFragment();return F(e,function(s){o.appendChild(s.dom)}),B.fromDom(o)},t=function(e,n,r){return e.fire("ListMutation",{action:n,element:r})},a=function(e){return e.style!==void 0&&D(e.style.getPropertyValue)},i=function(e,n,r){if(!M(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);a(e)&&e.style.setProperty(n,r)},u=function(e,n,r){var o=e.dom;i(o,n,r)},c=function(e,n){Me(e.item,n.list)},h=function(e){for(var n=1;n<e.length;n++)c(e[n-1],e[n])},S=function(e,n){dn(Y(e),Z(n),c)},z=function(e,n){var r={list:B.fromTag(n,e),item:B.fromTag("li",e)};return Me(r.list,r.item),r},de=function(e,n,r){for(var o=[],s=0;s<r;s++)o.push(z(e,n.listType));return o},Ae=function(e,n){for(var r=0;r<e.length-1;r++)u(e[r].item,"list-style-type","none");Y(e).each(function(o){Ee(o.list,n.listAttributes),Ee(o.item,n.itemAttributes),yt(o.item,n.content)})},Q=function(e,n){mt(e.list)!==n.listType&&(e.list=Ct(e.list,n.listType)),Ee(e.list,n.listAttributes)},xe=function(e,n,r){var o=B.fromTag("li",e);return Ee(o,n),yt(o,r),o},cr=function(e,n){Me(e.list,n),e.item=n},fr=function(e,n,r){var o=n.slice(0,r.depth);return Y(o).each(function(s){var l=xe(e,r.itemAttributes,r.content);cr(s,l),Q(s,r)}),o},dr=function(e,n,r){var o=de(e,r,r.depth-n.length);return h(o),Ae(o,r),S(n,o),n.concat(o)},vr=function(e,n){var r=Ne(n,function(o,s){return s.depth>o.length?dr(e,o,s):fr(e,o,s)},[]);return Z(r).map(function(o){return o.list})},q=function(e){return K(e,"OL,UL")},vn=function(e){return ht(e).exists(q)},mr=function(e){return bt(e).exists(q)},Dr=function(e){return e.depth>0},qr=function(e){return e.isSelected},Wr=function(e){var n=gt(e),r=mr(e)?n.slice(0,-1):n;return N(r,Fn)},Gr=function(e,n,r){return Ce(e).filter(Kt).map(function(o){return{depth:n,dirty:!1,isSelected:r,content:Wr(e),itemAttributes:pt(e),listAttributes:pt(o),listType:mt(o)}})},Kr=function(e,n){switch(e){case"Indent":n.depth++;break;case"Outdent":n.depth--;break;case"Flatten":n.depth=0}n.dirty=!0},Jr=function(e,n){e.listType=n.listType,e.listAttributes=_e({},n.listAttributes)},Qr=function(e){e.listAttributes=xn(e.listAttributes,function(n,r){return r!=="start"})},Xr=function(e,n){var r=e[n].depth,o=function(l){return l.depth===r&&!l.dirty},s=function(l){return l.depth<r};return v(_(e.slice(0,n)),o,s).orThunk(function(){return v(e.slice(n+1),o,s)})},Or=function(e){return F(e,function(n,r){Xr(e,r).fold(function(){n.dirty&&Qr(n)},function(o){return Jr(n,o)})}),e},Zr=function(e){var n=e,r=function(){return n},o=function(s){n=s};return{get:r,set:o}},Yr=function(e,n,r,o){return ht(o).filter(q).fold(function(){n.each(function(m){ft(m.start,o)&&r.set(!0)});var s=Gr(o,e,r.get());n.each(function(m){ft(m.end,o)&&r.set(!1)});var l=bt(o).filter(q).map(function(m){return mn(e,n,r,m)}).getOr([]);return s.toArray().concat(l)},function(s){return mn(e,n,r,s)})},mn=function(e,n,r,o){return A(gt(o),function(s){var l=q(s)?mn:Yr,m=e+1;return l(m,n,r,s)})},ea=function(e,n){var r=Zr(!1),o=0;return N(e,function(s){return{sourceList:s,entries:mn(o,n,r,s)}})},ta=function(e,n){var r=Or(n);return N(r,function(o){var s=lr(o.content);return B.fromDom(on(e,s.dom))})},na=function(e,n){var r=Or(n);return vr(e.contentDocument,r).toArray()},ra=function(e,n){return A(Ye(n,Dr),function(r){var o=Z(r).exists(Dr);return o?na(e,r):ta(e,r)})},aa=function(e,n){F(re(e,qr),function(r){return Kr(n,r)})},oa=function(e){var n=N(At(e),B.fromDom);return dn(y(n,je(vn)),y(_(n),je(vn)),function(r,o){return{start:r,end:o}})},ia=function(e,n,r){var o=ea(n,oa(e));F(o,function(s){aa(s.entries,r);var l=ra(e,s.entries);F(l,function(m){t(e,r==="Indent"?"IndentList":"OutdentList",m.dom)}),Zt(s.sourceList,l),Yt(s.sourceList)})},pr=function(e,n){var r=N(ur(e),B.fromDom),o=N(ir(e),B.fromDom),s=!1;if(r.length||o.length){var l=e.selection.getBookmark();ia(e,r,n),tr(e,n,o),e.selection.moveToBookmark(l),e.selection.setRng(Je(e.selection.getRng())),e.nodeChanged(),s=!0}return s},Ir=function(e){return pr(e,"Indent")},gr=function(e){return pr(e,"Outdent")},pn=function(e){return pr(e,"Flatten")},sa=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Xe=St.DOM,wt=function(e){var n={},r=function(o){var s=e[o?"startContainer":"endContainer"],l=e[o?"startOffset":"endOffset"];if(s.nodeType===1){var m=Xe.create("span",{"data-mce-type":"bookmark"});s.hasChildNodes()?(l=Math.min(l,s.childNodes.length-1),o?s.insertBefore(m,s.childNodes[l]):Xe.insertAfter(m,s.childNodes[l])):s.appendChild(m),s=m,l=0}n[o?"startContainer":"endContainer"]=s,n[o?"startOffset":"endOffset"]=l};return r(!0),e.collapsed||r(),n},Dt=function(e){var n=function(o){var s,l=function(C){for(var T=C.parentNode.firstChild,I=0;T;){if(T===C)return I;(T.nodeType!==1||T.getAttribute("data-mce-type")!=="bookmark")&&I++,T=T.nextSibling}return-1},m=s=e[o?"startContainer":"endContainer"],b=e[o?"startOffset":"endOffset"];m&&(m.nodeType===1&&(b=l(m),m=m.parentNode,Xe.remove(s),!m.hasChildNodes()&&Xe.isBlock(m)&&m.appendChild(Xe.create("br"))),e[o?"startContainer":"endContainer"]=m,e[o?"startOffset":"endOffset"]=b)};n(!0),n();var r=Xe.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),Je(r)},gn=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},kr=function(e){return/\btox\-/.test(e.className)},hr=function(e,n,r){var o=function(l){var m=v(l.parents,J,qn).filter(function(b){return b.nodeName===n&&!kr(b)}).isSome();r(m)},s=e.dom.getParents(e.selection.getNode());return o({parents:s}),e.on("NodeChange",o),function(){return e.off("NodeChange",o)}},ua=function(e,n,r){var o=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(n,"list-style-type",o)},Nr=function(e,n){te.each(n,function(r,o){e.setAttribute(o,r)})},la=function(e,n,r){Nr(n,r["list-attributes"]),te.each(e.select("li",n),function(o){Nr(o,r["list-item-attributes"])})},hn=function(e,n,r){ua(e,n,r),la(e,n,r)},ca=function(e,n,r){te.each(r,function(o){var s;return e.setStyle(n,(s={},s[o]="",s))})},_r=function(e,n,r,o){var s=n[r?"startContainer":"endContainer"],l=n[r?"startOffset":"endOffset"];for(s.nodeType===1&&(s=s.childNodes[Math.min(l,s.childNodes.length-1)]||s),!r&&Te(s.nextSibling)&&(s=s.nextSibling);s.parentNode!==o;){if(Lt(e,s)||/^(TD|TH)$/.test(s.parentNode.nodeName))return s;s=s.parentNode}return s},fa=function(e,n,r){for(var o=[],s=e.dom,l=_r(e,n,!0,r),m=_r(e,n,!1,r),b,C=[],T=l;T&&(C.push(T),T!==m);T=T.nextSibling);return te.each(C,function(I){if(Lt(e,I)){o.push(I),b=null;return}if(s.isBlock(I)||Te(I)){Te(I)&&s.remove(I),b=null;return}var ne=I.nextSibling;if(sa.isBookmarkNode(I)&&(J(ne)||Lt(e,ne)||!ne&&I.parentNode===r)){b=null;return}b||(b=s.create("p"),I.parentNode.insertBefore(b,I),o.push(b)),b.appendChild(I)}),o},da=function(e,n,r){var o=e.getStyle(n,"list-style-type"),s=r?r["list-style-type"]:"";return s=s===null?"":s,o===s},br=function(e,n,r){var o=e.selection.getRng(),s="LI",l=Le(e,e.selection.getStart(!0)),m=e.dom;if(m.getContentEditable(e.selection.getNode())!=="false"){n=n.toUpperCase(),n==="DL"&&(s="DT");var b=wt(o),C=fa(e,o,l);te.each(C,function(T){var I,ne=T.previousSibling,Ga=T.parentNode;Ke(Ga)||(ne&&J(ne)&&ne.nodeName===n&&da(m,ne,r)?(I=ne,T=m.rename(T,s),ne.appendChild(T)):(I=m.create(n),T.parentNode.insertBefore(I,T),I.appendChild(T),T=m.rename(T,s)),ca(m,T,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),hn(m,I,r),yr(e.dom,I))}),e.selection.setRng(Dt(b))}},va=function(e,n){return e&&n&&J(e)&&e.nodeName===n.nodeName},ma=function(e,n,r){var o=e.getStyle(n,"list-style-type",!0),s=e.getStyle(r,"list-style-type",!0);return o===s},pa=function(e,n){return e.className===n.className},$r=function(e,n,r){return va(n,r)&&ma(e,n,r)&&pa(n,r)},yr=function(e,n){var r,o;if(r=n.nextSibling,$r(e,n,r)){for(;o=r.firstChild;)n.appendChild(o);e.remove(r)}if(r=n.previousSibling,$r(e,n,r)){for(;o=r.lastChild;)n.insertBefore(o,n.firstChild);e.remove(r)}},ga=function(e,n,r,o){if(n.nodeName!==r){var s=e.dom.rename(n,r);hn(e.dom,s,o),t(e,gn(r),s)}else hn(e.dom,n,o),t(e,gn(r),n)},ha=function(e,n,r,o,s){var l=J(n);if(l&&n.nodeName===o&&!Ur(s))pn(e);else{br(e,o,s);var m=wt(e.selection.getRng()),b=l?We([n],r,!0):r;te.each(b,function(C){ga(e,C,o,s)}),e.selection.setRng(Dt(m))}},Ur=function(e){return"list-style-type"in e},ba=function(e,n,r,o){if(n!==e.getBody())if(n)if(n.nodeName===r&&!Ur(o)&&!kr(n))pn(e);else{var s=wt(e.selection.getRng());hn(e.dom,n,o);var l=e.dom.rename(n,r);yr(e.dom,l),e.selection.setRng(Dt(s)),br(e,r,o),t(e,gn(r),l)}else br(e,r,o),t(e,gn(r),n)},Cr=function(e,n,r){var o=Ie(e),s=ar(e),l=ie(r)?r:{};s.length>0?ha(e,o,s,n,l):ba(e,o,n,l)},Pr=St.DOM,ya=function(e,n){var r=n.parentNode;if(r.nodeName==="LI"&&r.firstChild===n){var o=r.previousSibling;o&&o.nodeName==="LI"?(o.appendChild(n),oe(e,r)&&Pr.remove(r)):Pr.setStyle(r,"listStyleType","none")}if(J(r)){var o=r.previousSibling;o&&o.nodeName==="LI"&&o.appendChild(n)}},Ca=function(e,n){var r=te.grep(e.select("ol,ul",n));te.each(r,function(o){ya(e,o)})},Br=function(e,n,r,o){var s=n.startContainer,l=n.startOffset;if(Se(s)&&(r?l<s.data.length:l>0))return s;var m=e.schema.getNonEmptyElements();s.nodeType===1&&(s=vt.getNode(s,l));var b=new Rn(s,o);for(r&&Gn(e.dom,s)&&b.next();s=b[r?"next":"prev2"]();)if(s.nodeName==="LI"&&!s.hasChildNodes()||m[s.nodeName]||Se(s)&&s.data.length>0)return s},Er=function(e,n){var r=n.childNodes;return r.length===1&&!J(r[0])&&e.isBlock(r[0])},Sa=function(e,n){Er(e,n)&&e.remove(n.firstChild,!0)},Ta=function(e,n,r){var o,s=Er(e,r)?r.firstChild:r;if(Sa(e,n),!oe(e,n,!0))for(;o=n.firstChild;)s.appendChild(o)},Sr=function(e,n,r){var o,s=n.parentNode;if(!(!an(e,n)||!an(e,r))){J(r.lastChild)&&(o=r.lastChild),s===r.lastChild&&Te(s.previousSibling)&&e.remove(s.previousSibling);var l=r.lastChild;l&&Te(l)&&n.hasChildNodes()&&e.remove(l),oe(e,r,!0)&&e.$(r).empty(),Ta(e,n,r),o&&r.appendChild(o);var m=dt(B.fromDom(r),B.fromDom(n)),b=m?e.getParents(n,J,r):[];e.remove(n),F(b,function(C){oe(e,C)&&C!==e.getRoot()&&e.remove(C)})}},La=function(e,n,r){e.dom.$(r).empty(),Sr(e.dom,n,r),e.selection.setCursorLocation(r,0)},Aa=function(e,n,r,o){var s=e.dom;if(s.isEmpty(o))La(e,r,o);else{var l=wt(n);Sr(s,r,o),e.selection.setRng(Dt(l))}},wa=function(e,n,r,o){var s=wt(n);Sr(e.dom,r,o);var l=Dt(s);e.selection.setRng(l)},Da=function(e,n){var r=e.dom,o=e.selection,s=o.getStart(),l=Le(e,s),m=r.getParent(o.getStart(),"LI",l);if(m){var b=m.parentNode;if(b===e.getBody()&&oe(r,b))return!0;var C=Je(o.getRng()),T=r.getParent(Br(e,C,n,l),"LI",l);if(T&&T!==m)return e.undoManager.transact(function(){n?Aa(e,C,T,m):Wn(m)?gr(e):wa(e,C,m,T)}),!0;if(!T&&!n&&C.startOffset===0&&C.endOffset===0)return e.undoManager.transact(function(){pn(e)}),!0}return!1},Oa=function(e,n,r){var o=e.getParent(n.parentNode,e.isBlock,r);e.remove(n),o&&e.isEmpty(o)&&e.remove(o)},Ia=function(e,n){var r=e.dom,o=e.selection.getStart(),s=Le(e,o),l=r.getParent(o,r.isBlock,s);if(l&&r.isEmpty(l)){var m=Je(e.selection.getRng()),b=r.getParent(Br(e,m,n,s),"LI",s);if(b)return e.undoManager.transact(function(){Oa(r,l,s),yr(r,b.parentNode),e.selection.select(b,!0),e.selection.collapse(n)}),!0}return!1},ka=function(e,n){return Da(e,n)||Ia(e,n)},Na=function(e){var n=e.selection.getStart(),r=Le(e,n),o=e.dom.getParent(n,"LI,DT,DD",r);return o||At(e).length>0?(e.undoManager.transact(function(){e.execCommand("Delete"),Ca(e.dom,e.getBody())}),!0):!1},Tr=function(e,n){return e.selection.isCollapsed()?ka(e,n):Na(e)},_a=function(e){e.on("keydown",function(n){n.keyCode===ce.BACKSPACE?Tr(e,!1)&&n.preventDefault():n.keyCode===ce.DELETE&&Tr(e,!0)&&n.preventDefault()})},$a=function(e){return{backspaceDelete:function(n){Tr(e,n)}}},Ua=function(e,n){var r=Ie(e);e.undoManager.transact(function(){ie(n.styles)&&e.dom.setStyles(r,n.styles),ie(n.attrs)&&ye(n.attrs,function(o,s){return e.dom.setAttrib(r,s,o)})})},Mr=function(e){var n=_(wn(e).split("")),r=N(n,function(o,s){var l=o.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,s)*l});return Ne(r,function(o,s){return o+s},0)},Lr=function(e){if(e--,e<0)return"";var n=e%26,r=Math.floor(e/26),o=Lr(r),s=String.fromCharCode("A".charCodeAt(0)+n);return o+s},Pa=function(e){return/^[A-Z]+$/.test(e)},Ba=function(e){return/^[a-z]+$/.test(e)},Ea=function(e){return/^[0-9]+$/.test(e)},Ma=function(e){return Ea(e)?2:Pa(e)?0:Ba(e)?1:On(e)?3:4},Ra=function(e){switch(Ma(e)){case 2:return O.some({listStyleType:O.none(),start:e});case 0:return O.some({listStyleType:O.some("upper-alpha"),start:Mr(e).toString()});case 1:return O.some({listStyleType:O.some("lower-alpha"),start:Mr(e).toString()});case 3:return O.some({listStyleType:O.none(),start:""});case 4:return O.none()}},xa=function(e){var n=parseInt(e.start,10);return fn(e.listStyleType,"upper-alpha")?Lr(n):fn(e.listStyleType,"lower-alpha")?Lr(n).toLowerCase():e.start},Va=function(e){var n=Ie(e);tn(n)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:xa({start:e.dom.getAttrib(n,"start","1"),listStyleType:O.some(e.dom.getStyle(n,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(r){var o=r.getData();Ra(o.start).each(function(s){e.execCommand("mceListUpdate",!1,{attrs:{start:s.start==="1"?"":s.start},styles:{"list-style-type":s.listStyleType.getOr("")}})}),r.close()}})},Ar=function(e,n){return function(){var r=Ie(e);return r&&r.nodeName===n}},Rr=function(e){e.addCommand("mceListProps",function(){Va(e)})},za=function(e){e.on("BeforeExecCommand",function(n){var r=n.command.toLowerCase();r==="indent"?Ir(e):r==="outdent"&&gr(e)}),e.addCommand("InsertUnorderedList",function(n,r){Cr(e,"UL",r)}),e.addCommand("InsertOrderedList",function(n,r){Cr(e,"OL",r)}),e.addCommand("InsertDefinitionList",function(n,r){Cr(e,"DL",r)}),e.addCommand("RemoveList",function(){pn(e)}),Rr(e),e.addCommand("mceListUpdate",function(n,r){ie(r)&&Ua(e,r)}),e.addQueryStateHandler("InsertUnorderedList",Ar(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Ar(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Ar(e,"DL"))},Ha=function(e){e.on("keydown",function(n){n.keyCode!==ce.TAB||ce.metaKeyPressed(n)||e.undoManager.transact(function(){(n.shiftKey?gr(e):Ir(e))&&n.preventDefault()})})},Fa=function(e){Kn(e)&&Ha(e),_a(e)},ja=function(e){var n=function(r){return function(){return e.execCommand(r)}};e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:n("InsertOrderedList"),onSetup:function(r){return hr(e,"OL",r.setActive)}}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:n("InsertUnorderedList"),onSetup:function(r){return hr(e,"UL",r.setActive)}}))},qa=function(e){var n={text:"List properties...",icon:"ordered-list",onAction:function(){return e.execCommand("mceListProps")},onSetup:function(r){return hr(e,"OL",function(o){return r.setDisabled(!o)})}};e.ui.registry.addMenuItem("listprops",n),e.ui.registry.addContextMenu("lists",{update:function(r){var o=Ie(e,r);return tn(o)?["listprops"]:[]}})};function Wa(){d.add("lists",function(e){return e.hasPlugin("rtc",!0)===!1?(Fa(e),za(e)):Rr(e),ja(e),qa(e),$a(e)})}Wa()})();(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(v,y,L){var A=y==="UL"?"InsertUnorderedList":"InsertOrderedList";v.execCommand(A,!1,L===!1?null:{"list-style-type":L})},k=function(v){v.addCommand("ApplyUnorderedListStyle",function(y,L){p(v,"UL",L["list-style-type"])}),v.addCommand("ApplyOrderedListStyle",function(y,L){p(v,"OL",L["list-style-type"])})},U=tinymce.util.Tools.resolve("tinymce.util.Tools"),M=function(v){var y=v.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return y?y.split(/[ ,]/):[]},ie=function(v){var y=v.getParam("advlist_bullet_styles","default,circle,square");return y?y.split(/[ ,]/):[]},w=function(){},P=function(v){return function(){return v}},D=function(v){return v},G=P(!1),H=P(!0),g=function(){return x},x=function(){var v=function(A){return A()},y=D,L={fold:function(A,_){return A()},isSome:G,isNone:H,getOr:y,getOrThunk:v,getOrDie:function(A){throw new Error(A||"error: getOrDie called on none.")},getOrNull:P(null),getOrUndefined:P(void 0),or:y,orThunk:v,map:g,each:w,bind:g,exists:G,forall:H,filter:function(){return g()},toArray:function(){return[]},toString:P("none()")};return L}(),se=function(v){var y=P(v),L=function(){return _},A=function($){return $(v)},_={fold:function($,Z){return Z(v)},isSome:H,isNone:G,getOr:y,getOrThunk:y,getOrDie:y,getOrNull:y,getOrUndefined:y,or:L,orThunk:L,map:function($){return se($(v))},each:function($){$(v)},bind:A,exists:A,forall:A,filter:function($){return $(v)?_:x},toArray:function(){return[v]},toString:function(){return"some("+v+")"}};return _},je=function(v){return v==null?x:se(v)},ve={some:se,none:g,from:je},X=function(v,y){return v.$.contains(v.getBody(),y)},we=function(v){return v&&/^(TH|TD)$/.test(v.nodeName)},me=function(v){return function(y){return y&&/^(OL|UL|DL)$/.test(y.nodeName)&&X(v,y)}},pe=function(v){var y=v.dom.getParent(v.selection.getNode(),"ol,ul"),L=v.dom.getStyle(y,"listStyleType");return ve.from(L)},De=function(v,y){for(var L=0;L<v.length;L++){var A=v[L];if(y(A))return L}return-1},O=function(v){return v.replace(/\-/g," ").replace(/\b\w/g,function(y){return y.toUpperCase()})},ke=function(v,y,L){var A=De(y.parents,we),_=A!==-1?y.parents.slice(0,A):y.parents,$=U.grep(_,me(v));return $.length>0&&$[0].nodeName===L},qe=function(v,y){return function(L){var A=function(_){L.setActive(ke(v,_,y))};return v.on("NodeChange",A),function(){return v.off("NodeChange",A)}}},N=function(v,y,L,A,_,$){v.ui.registry.addSplitButton(y,{tooltip:L,icon:_==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(Z){var Y=U.map($,function(ee){var _e=_==="OL"?"num":"bull",We=ee==="disc"||ee==="decimal"?"default":ee,et=ee==="default"?"":ee,tt=O(ee);return{type:"choiceitem",value:et,icon:"list-"+_e+"-"+We,text:tt}});Z(Y)},onAction:function(){return v.execCommand(A)},onItemAction:function(Z,Y){p(v,_,Y)},select:function(Z){var Y=pe(v);return Y.map(function(ee){return Z===ee}).getOr(!1)},onSetup:qe(v,_)})},F=function(v,y,L,A,_,$){v.ui.registry.addToggleButton(y,{active:!1,tooltip:L,icon:_==="OL"?"ordered-list":"unordered-list",onSetup:qe(v,_),onAction:function(){return v.execCommand(A)}})},re=function(v,y,L,A,_,$){$.length>1?N(v,y,L,A,_,$):F(v,y,L,A,_)},Ye=function(v){re(v,"numlist","Numbered list","InsertOrderedList","OL",M(v)),re(v,"bullist","Bullet list","InsertUnorderedList","UL",ie(v))};function Ne(){d.add("advlist",function(v){v.hasPlugin("lists")?(Ye(v),k(v)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}Ne()})();(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(){return p=Object.assign||function(a){for(var i,u=1,c=arguments.length;u<c;u++){i=arguments[u];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(a[h]=i[h])}return a},p.apply(this,arguments)},k=function(t){var a=typeof t;return t===null?"null":a==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":a==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":a},U=function(t){return function(a){return k(a)===t}},M=function(t){return function(a){return typeof a===t}},ie=function(t){return function(a){return t===a}},w=U("string"),P=U("object"),D=U("array"),G=ie(null),H=M("boolean"),g=function(t){return t==null},x=function(t){return!g(t)},se=M("function"),je=M("number"),ve=function(){},X=function(t){return function(){return t}},we=function(t){return t},me=X(!1),pe=X(!0),De=function(){return O},O=function(){var t=function(u){return u()},a=we,i={fold:function(u,c){return u()},isSome:me,isNone:pe,getOr:a,getOrThunk:t,getOrDie:function(u){throw new Error(u||"error: getOrDie called on none.")},getOrNull:X(null),getOrUndefined:X(void 0),or:a,orThunk:t,map:De,each:ve,bind:De,exists:me,forall:pe,filter:function(){return De()},toArray:function(){return[]},toString:X("none()")};return i}(),ke=function(t){var a=X(t),i=function(){return c},u=function(h){return h(t)},c={fold:function(h,S){return S(t)},isSome:pe,isNone:me,getOr:a,getOrThunk:a,getOrDie:a,getOrNull:a,getOrUndefined:a,or:i,orThunk:i,map:function(h){return ke(h(t))},each:function(h){h(t)},bind:u,exists:u,forall:u,filter:function(h){return h(t)?c:O},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return c},qe=function(t){return t==null?O:ke(t)},N={some:ke,none:De,from:qe},F=Object.keys,re=Object.hasOwnProperty,Ye=function(t,a){for(var i=F(t),u=0,c=i.length;u<c;u++){var h=i[u],S=t[h];a(S,h)}},Ne=function(t){return function(a,i){t[i]=a}},v=function(t,a,i,u){var c={};return Ye(t,function(h,S){(a(h,S)?i:u)(h,S)}),c},y=function(t,a){var i={};return v(t,a,Ne(i),ve),i},L=function(t,a){return re.call(t,a)},A=function(t,a){return L(t,a)&&t[a]!==void 0&&t[a]!==null},_=Array.prototype.push,$=function(t){for(var a=[],i=0,u=t.length;i<u;++i){if(!D(t[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+t);_.apply(a,t[i])}return a},Z=function(t,a){return a>=0&&a<t.length?N.some(t[a]):N.none()},Y=function(t){return Z(t,0)},ee=function(t,a){for(var i=0;i<t.length;i++){var u=a(t[i],i);if(u.isSome())return u}return N.none()};typeof window<"u"||Function("return this;")();var _e=function(t,a,i){if(w(i)||H(i)||je(i))t.setAttribute(a,i+"");else throw console.error("Invalid call to Attribute.set. Key ",a,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple")},We=function(t,a,i){_e(t.dom,a,i)},et=function(t,a){t.dom.removeAttribute(a)},tt=function(t,a){var i=a||document,u=i.createElement("div");if(u.innerHTML=t,!u.hasChildNodes()||u.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return $e(u.childNodes[0])},Sn=function(t,a){var i=a||document,u=i.createElement(t);return $e(u)},Tn=function(t,a){var i=a||document,u=i.createTextNode(t);return $e(u)},$e=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},It=function(t,a,i){return N.from(t.dom.elementFromPoint(a,i)).map($e)},Ue={fromHtml:tt,fromTag:Sn,fromText:Tn,fromDom:$e,fromPoint:It},Pe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ue=tinymce.util.Tools.resolve("tinymce.util.Promise"),kt=tinymce.util.Tools.resolve("tinymce.util.URI"),Ln=tinymce.util.Tools.resolve("tinymce.util.XHR"),Nt=function(t){return t.getParam("image_dimensions",!0,"boolean")},V=function(t){return t.getParam("image_advtab",!1,"boolean")},An=function(t){return t.getParam("image_uploadtab",!0,"boolean")},wn=function(t){return t.getParam("image_prepend_url","","string")},Dn=function(t){return t.getParam("image_class_list")},On=function(t){return t.getParam("image_description",!0,"boolean")},nt=function(t){return t.getParam("image_title",!1,"boolean")},ae=function(t){return t.getParam("image_caption",!1,"boolean")},In=function(t){return t.getParam("image_list",!1)},kn=function(t){return x(t.getParam("images_upload_url"))},_t=function(t){return x(t.getParam("images_upload_handler"))},$t=function(t){return t.getParam("a11y_advanced_options",!1,"boolean")},Ut=function(t){return t.getParam("automatic_uploads",!0,"boolean")},rt=function(t,a){return Math.max(parseInt(t,10),parseInt(a,10))},Pt=function(t){return new ue(function(a){var i=document.createElement("img"),u=function(h){i.onload=i.onerror=null,i.parentNode&&i.parentNode.removeChild(i),a(h)};i.onload=function(){var h=rt(i.width,i.clientWidth),S=rt(i.height,i.clientHeight),z={width:h,height:S};u(ue.resolve(z))},i.onerror=function(){u(ue.reject("Failed to get image dimensions for: "+t))};var c=i.style;c.visibility="hidden",c.position="fixed",c.bottom=c.left="0px",c.width=c.height="auto",document.body.appendChild(i),i.src=t})},le=function(t){return t&&(t=t.replace(/px$/,"")),t},Be=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},Bt=function(t){if(t.margin){var a=String(t.margin).split(" ");switch(a.length){case 1:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[0],t["margin-bottom"]=t["margin-bottom"]||a[0],t["margin-left"]=t["margin-left"]||a[0];break;case 2:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[0],t["margin-left"]=t["margin-left"]||a[1];break;case 3:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[2],t["margin-left"]=t["margin-left"]||a[1];break;case 4:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[2],t["margin-left"]=t["margin-left"]||a[3]}delete t.margin}return t},Et=function(t,a){var i=In(t);w(i)?Ln.send({url:i,success:function(u){a(JSON.parse(u))}}):se(i)?i(a):a(i)},Mt=function(t,a,i){var u=function(){i.onload=i.onerror=null,t.selection&&(t.selection.select(i),t.nodeChanged())};i.onload=function(){!a.width&&!a.height&&Nt(t)&&t.dom.setAttribs(i,{width:String(i.clientWidth),height:String(i.clientHeight)}),u()},i.onerror=u},Rt=function(t){return new ue(function(a,i){var u=new FileReader;u.onload=function(){a(u.result)},u.onerror=function(){i(u.error.message)},u.readAsDataURL(t)})},at=function(t){return t.nodeName==="IMG"&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},ot=function(t,a){return kt.isDomSafe(a,"img",t.settings)},j=Pe.DOM,it=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?le(t.style.marginLeft):""},st=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?le(t.style.marginTop):""},ut=function(t){return t.style.borderWidth?le(t.style.borderWidth):""},ge=function(t,a){return t.hasAttribute(a)?t.getAttribute(a):""},xt=function(t,a){return t.style[a]?t.style[a]:""},lt=function(t){return t.parentNode!==null&&t.parentNode.nodeName==="FIGURE"},he=function(t,a,i){i===""?t.removeAttribute(a):t.setAttribute(a,i)},Nn=function(t){var a=j.create("figure",{class:"image"});j.insertAfter(a,t),a.appendChild(t),a.appendChild(j.create("figcaption",{contentEditable:"true"},"Caption")),a.contentEditable="false"},_n=function(t){var a=t.parentNode;j.insertAfter(t,a),j.remove(a)},$n=function(t){lt(t)?_n(t):Nn(t)},Vt=function(t,a){var i=t.getAttribute("style"),u=a(i!==null?i:"");u.length>0?(t.setAttribute("style",u),t.setAttribute("data-mce-style",u)):t.removeAttribute("style")},zt=function(t,a){return function(i,u,c){i.style[u]?(i.style[u]=Be(c),Vt(i,a)):he(i,u,c)}},Ht=function(t,a){return t.style[a]?le(t.style[a]):ge(t,a)},Ft=function(t,a){var i=Be(a);t.style.marginLeft=i,t.style.marginRight=i},ct=function(t,a){var i=Be(a);t.style.marginTop=i,t.style.marginBottom=i},jt=function(t,a){var i=Be(a);t.style.borderWidth=i},qt=function(t,a){t.style.borderStyle=a},Un=function(t){return xt(t,"borderStyle")},be=function(t){return t.nodeName==="FIGURE"},Pn=function(t){return t.nodeName==="IMG"},B=function(t){return j.getAttrib(t,"alt").length===0&&j.getAttrib(t,"role")==="presentation"},Bn=function(t){return B(t)?"":ge(t,"alt")},ft=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},En=function(t,a){var i=document.createElement("img");return he(i,"style",a.style),(it(i)||a.hspace!=="")&&Ft(i,a.hspace),(st(i)||a.vspace!=="")&&ct(i,a.vspace),(ut(i)||a.border!=="")&&jt(i,a.border),(Un(i)||a.borderStyle!=="")&&qt(i,a.borderStyle),t(i.getAttribute("style"))},Mn=function(t,a){var i=document.createElement("img");if(Wt(t,p(p({},a),{caption:!1}),i),vt(i,a.alt,a.isDecorative),a.caption){var u=j.create("figure",{class:"image"});return u.appendChild(i),u.appendChild(j.create("figcaption",{contentEditable:"true"},"Caption")),u.contentEditable="false",u}else return i},dt=function(t,a){return{src:ge(a,"src"),alt:Bn(a),title:ge(a,"title"),width:Ht(a,"width"),height:Ht(a,"height"),class:ge(a,"class"),style:t(ge(a,"style")),caption:lt(a),hspace:it(a),vspace:st(a),border:ut(a),borderStyle:xt(a,"borderStyle"),isDecorative:B(a)}},K=function(t,a,i,u,c){i[u]!==a[u]&&c(t,u,i[u])},vt=function(t,a,i){if(i){j.setAttrib(t,"role","presentation");var u=Ue.fromDom(t);We(u,"alt","")}else{if(G(a)){var u=Ue.fromDom(t);et(u,"alt")}else{var u=Ue.fromDom(t);We(u,"alt",a)}j.getAttrib(t,"role")==="presentation"&&j.setAttrib(t,"role","")}},Rn=function(t,a,i){(i.alt!==a.alt||i.isDecorative!==a.isDecorative)&&vt(t,i.alt,i.isDecorative)},ce=function(t,a){return function(i,u,c){t(i,c),Vt(i,a)}},Wt=function(t,a,i){var u=dt(t,i);K(i,u,a,"caption",function(c,h,S){return $n(c)}),K(i,u,a,"src",he),K(i,u,a,"title",he),K(i,u,a,"width",zt("width",t)),K(i,u,a,"height",zt("height",t)),K(i,u,a,"class",he),K(i,u,a,"style",ce(function(c,h){return he(c,"style",h)},t)),K(i,u,a,"hspace",ce(Ft,t)),K(i,u,a,"vspace",ce(ct,t)),K(i,u,a,"border",ce(jt,t)),K(i,u,a,"borderStyle",ce(qt,t)),Rn(i,u,a)},ye=function(t,a){var i=t.dom.styles.parse(a),u=Bt(i),c=t.dom.styles.parse(t.dom.styles.serialize(u));return t.dom.styles.serialize(c)},Ge=function(t){var a=t.selection.getNode(),i=t.dom.getParent(a,"figure.image");return i?t.dom.select("img",i)[0]:a&&(a.nodeName!=="IMG"||at(a))?null:a},Gt=function(t,a){var i=t.dom,u=y(t.schema.getTextBlockElements(),function(h,S){return!t.schema.isValidChild(S,"figure")}),c=i.getParent(a.parentNode,function(h){return A(u,h.nodeName)},t.getBody());return c?i.split(c,a):a},xn=function(t){var a=Ge(t);return a?dt(function(i){return ye(t,i)},a):ft()},mt=function(t,a){var i=Mn(function(h){return ye(t,h)},a);t.dom.setAttrib(i,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(i.outerHTML);var u=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(u,"data-mce-id",null),be(u)){var c=Gt(t,u);t.selection.select(c)}else t.selection.select(u)},Vn=function(t,a){t.dom.setAttrib(a,"src",a.getAttribute("src"))},zn=function(t,a){if(a){var i=t.dom.is(a.parentNode,"figure.image")?a.parentNode:a;t.dom.remove(i),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}},Kt=function(t,a){var i=Ge(t);if(Wt(function(c){return ye(t,c)},a,i),Vn(t,i),be(i.parentNode)){var u=i.parentNode;Gt(t,u),t.selection.select(i.parentNode)}else t.selection.select(i),Mt(t,a,i)},Jt=function(t,a){var i=a.src;return p(p({},a),{src:ot(t,i)?i:""})},Hn=function(t,a){var i=Ge(t);if(i){var u=dt(function(S){return ye(t,S)},i),c=p(p({},u),a),h=Jt(t,c);c.src?Kt(t,h):zn(t,i)}else a.src&&mt(t,p(p({},ft()),a))},Ee=function(t,a){var i=P(t)&&P(a);return i?Ce(t,a):a},pt=function(t){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(a.length===0)throw new Error("Can't merge zero objects");for(var u={},c=0;c<a.length;c++){var h=a[c];for(var S in h)L(h,S)&&(u[S]=t(u[S],h[S]))}return u}},Ce=pt(Ee),gt=function(t){return t.length>0},Qt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ht=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=function(t){return w(t.value)?t.value:""},Xt=function(t){return w(t.text)?t.text:w(t.title)?t.title:""},Me=function(t,a){var i=[];return ht.each(t,function(u){var c=Xt(u);if(u.menu!==void 0){var h=Me(u.menu,a);i.push({text:c,items:h})}else{var S=a(u);i.push({text:c,value:S})}}),i},Zt=function(t){return t===void 0&&(t=bt),function(a){return a?N.from(a).map(function(i){return Me(i,t)}):N.none()}},yt=function(t){return Zt(bt)(t)},Yt=function(t){return L(t,"items")},en=function(t,a){return ee(t,function(i){return Yt(i)?en(i.items,a):i.value===a?N.some(i):N.none()})},Fn=function(t,a){return t.bind(function(i){return en(i,a)})},Oe={sanitizer:Zt,sanitize:yt,findEntry:Fn},Ct=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},St={makeTab:Ct},te=function(t){var a=Oe.sanitizer(function(q){return t.convertURL(q.value||q.url,"src")}),i=new ue(function(q){Et(t,function(vn){q(a(vn).map(function(mr){return $([[{text:"None",value:""}],mr])}))})}),u=Oe.sanitize(Dn(t)),c=V(t),h=An(t),S=kn(t),z=_t(t),de=xn(t),Ae=On(t),Q=nt(t),xe=Nt(t),cr=ae(t),fr=$t(t),dr=Ut(t),vr=N.some(wn(t)).filter(function(q){return w(q)&&q.length>0});return i.then(function(q){return{image:de,imageList:q,classList:u,hasAdvTab:c,hasUploadTab:h,hasUploadUrl:S,hasUploadHandler:z,hasDescription:Ae,hasImageTitle:Q,hasDimensions:xe,hasImageCaption:cr,prependURL:vr,hasAccessibilityOptions:fr,automaticUploads:dr}})},Tt=function(t){var a={name:"src",type:"urlinput",filetype:"image",label:"Source"},i=t.imageList.map(function(Q){return{name:"images",type:"listbox",label:"Image list",items:Q}}),u={name:"alt",type:"input",label:"Alternative description",disabled:t.hasAccessibilityOptions&&t.image.isDecorative},c={name:"title",type:"input",label:"Image title"},h={name:"dimensions",type:"sizeinput"},S={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},z=t.classList.map(function(Q){return{name:"classes",type:"listbox",label:"Class",items:Q}}),de={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Ae=function(Q){return Q?{type:"grid",columns:2}:{type:"panel"}};return $([[a],i.toArray(),t.hasAccessibilityOptions&&t.hasDescription?[S]:[],t.hasDescription?[u]:[],t.hasImageTitle?[c]:[],t.hasDimensions?[h]:[],[p(p({},Ae(t.classList.isSome()&&t.hasImageCaption)),{items:$([z.toArray(),t.hasImageCaption?[de]:[]])})]])},Re=function(t){return{title:"General",name:"general",items:Tt(t)}},Se={makeTab:Re,makeItems:Tt},J=function(t){var a=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:a}},jn={makeTab:J},tn=function(t){return{prevImage:Oe.findEntry(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}},Ke=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[],isDecorative:t.isDecorative}},nn=function(t,a){return{src:t.src.value,alt:t.alt.length===0&&a?null:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle,isDecorative:t.isDecorative}},qn=function(t,a){return/^(?:[a-zA-Z]+:)?\/\//.test(a)?N.none():t.prependURL.bind(function(i){return a.substring(0,i.length)!==i?N.some(i+a):N.none()})},Te=function(t,a){var i=a.getData();qn(t,i.src.value).each(function(u){a.setData({src:{value:u,meta:i.src.meta}})})},Wn=function(t,a,i){t.hasDescription&&w(i.alt)&&(a.alt=i.alt),t.hasAccessibilityOptions&&(a.isDecorative=i.isDecorative||a.isDecorative||!1),t.hasImageTitle&&w(i.title)&&(a.title=i.title),t.hasDimensions&&(w(i.width)&&(a.dimensions.width=i.width),w(i.height)&&(a.dimensions.height=i.height)),w(i.class)&&Oe.findEntry(t.classList,i.class).each(function(u){a.classes=u.value}),t.hasImageCaption&&H(i.caption)&&(a.caption=i.caption),t.hasAdvTab&&(w(i.style)&&(a.style=i.style),w(i.vspace)&&(a.vspace=i.vspace),w(i.border)&&(a.border=i.border),w(i.hspace)&&(a.hspace=i.hspace),w(i.borderstyle)&&(a.borderstyle=i.borderstyle))},Lt=function(t,a){var i=a.getData(),u=i.src.meta;if(u!==void 0){var c=Ce({},i);Wn(t,c,u),a.setData(c)}},rn=function(t,a,i,u){var c=u.getData(),h=c.src.value,S=c.src.meta||{};!S.width&&!S.height&&a.hasDimensions&&(gt(h)?t.imageSize(h).then(function(z){i.open&&u.setData({dimensions:z})}).catch(function(z){return console.error(z)}):u.setData({dimensions:{width:"",height:""}}))},Gn=function(t,a,i){var u=i.getData(),c=Oe.findEntry(t.imageList,u.src.value);a.prevImage=c,i.setData({images:c.map(function(h){return h.value}).getOr("")})},oe=function(t,a,i,u){Te(a,u),Lt(a,u),rn(t,a,i,u),Gn(a,i,u)},an=function(t,a,i,u){var c=u.getData(),h=Oe.findEntry(a.imageList,c.images);h.each(function(S){var z=c.alt===""||i.prevImage.map(function(de){return de.text===c.alt}).getOr(!1);z?S.value===""?u.setData({src:S,alt:i.prevAlt}):u.setData({src:S,alt:S.text}):u.setData({src:S})}),i.prevImage=h,oe(t,a,i,u)},Kn=function(t){var a=t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"];return a?le(String(t["margin-top"])):""},Jn=function(t){var a=t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"];return a?le(String(t["margin-right"])):""},Qn=function(t){return t["border-width"]?le(String(t["border-width"])):""},on=function(t){return t["border-style"]?String(t["border-style"]):""},fe=function(t,a,i){return a(t(a(i)))},Xn=function(t,a,i){var u=Bt(t(i.style)),c=Ce({},i);return c.vspace=Kn(u),c.hspace=Jn(u),c.border=Qn(u),c.borderstyle=on(u),c.style=fe(t,a,u),c},Zn=function(t,a){var i=a.getData(),u=Xn(t.parseStyle,t.serializeStyle,i);a.setData(u)},sn=function(t,a,i){var u=Ce(Ke(a.image),i.getData()),c=En(t.normalizeCss,nn(u,!1));i.setData({style:c})},Yn=function(t,a,i,u){var c=u.getData();u.block("Uploading image"),Y(c.fileinput).fold(function(){u.unblock()},function(h){var S=URL.createObjectURL(h),z=function(){u.unblock(),URL.revokeObjectURL(S)},de=function(Ae){u.setData({src:{value:Ae,meta:{}}}),u.showTab("general"),oe(t,a,i,u)};Rt(h).then(function(Ae){var Q=t.createBlobCache(h,S,Ae);a.automaticUploads?t.uploadImage(Q).then(function(xe){de(xe.url),z()}).catch(function(xe){z(),t.alertErr(xe)}):(t.addToBlobCache(Q),de(Q.blobUri()),u.unblock())})})},er=function(t,a,i){return function(u,c){c.name==="src"?oe(t,a,i,u):c.name==="images"?an(t,a,i,u):c.name==="alt"?i.prevAlt=u.getData().alt:c.name==="style"?Zn(t,u):c.name==="vspace"||c.name==="hspace"||c.name==="border"||c.name==="borderstyle"?sn(t,a,u):c.name==="fileinput"?Yn(t,a,i,u):c.name==="isDecorative"&&(u.getData().isDecorative?u.disable("alt"):u.enable("alt"))}},tr=function(t){return function(){t.open=!1}},un=function(t){if(t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler){var a={type:"tabpanel",tabs:$([[Se.makeTab(t)],t.hasAdvTab?[St.makeTab(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[jn.makeTab(t)]:[]])};return a}else{var i={type:"panel",items:Se.makeItems(t)};return i}},Je=function(t){return function(a){var i=tn(a);return{title:"Insert/Edit Image",size:"normal",body:un(a),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ke(a.image),onSubmit:t.onSubmit(a),onChange:er(t,a,i),onClose:tr(i)}}},ln=function(t){return function(a){return function(i){var u=Ce(Ke(a.image),i.getData());t.execCommand("mceUpdateImage",!1,nn(u,a.hasAccessibilityOptions)),t.editorUpload.uploadImagesAuto(),i.close()}}},Ie=function(t){return function(a){return ot(t,a)?Pt(t.documentBaseURI.toAbsolute(a)).then(function(i){return{width:String(i.width),height:String(i.height)}}):ue.resolve({width:"",height:""})}},nr=function(t){return function(a,i,u){return t.editorUpload.blobCache.create({blob:a,blobUri:i,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,filename:a.name,base64:u.split(",")[1]})}},rr=function(t){return function(a){t.editorUpload.blobCache.add(a)}},ar=function(t){return function(a){t.windowManager.alert(a)}},or=function(t){return function(a){return ye(t,a)}},At=function(t){return function(a){return t.dom.parseStyle(a)}},ir=function(t){return function(a,i){return t.dom.serializeStyle(a,i)}},Le=function(t){return function(a){return Qt(t).upload([a],!1).then(function(i){return i.length===0?ue.reject("Failed to upload image"):i[0].status===!1?ue.reject(i[0].error.message):i[0]})}},Qe=function(t){var a={onSubmit:ln(t),imageSize:Ie(t),addToBlobCache:rr(t),createBlobCache:nr(t),alertErr:ar(t),normalizeCss:or(t),parseStyle:At(t),serializeStyle:ir(t),uploadImage:Le(t)},i=function(){te(t).then(Je(a)).then(t.windowManager.open)};return{open:i}},sr=function(t){t.addCommand("mceImage",Qe(t).open),t.addCommand("mceUpdateImage",function(a,i){t.undoManager.transact(function(){return Hn(t,i)})})},ur=function(t){var a=t.attr("class");return a&&/\bimage\b/.test(a)},cn=function(t){return function(a){for(var i=a.length,u=function(h){h.attr("contenteditable",t?"true":null)};i--;){var c=a[i];ur(c)&&(c.attr("contenteditable",t?"false":null),ht.each(c.getAll("figcaption"),u))}}},fn=function(t){t.on("PreInit",function(){t.parser.addNodeFilter("figure",cn(!0)),t.serializer.addNodeFilter("figure",cn(!1))})},dn=function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Qe(t).open,onSetup:function(a){return a.setActive(x(Ge(t))),t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",a.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Qe(t).open}),t.ui.registry.addContextMenu("image",{update:function(a){return be(a)||Pn(a)&&!at(a)?["image"]:[]}})};function lr(){d.add("image",function(t){fn(t),dn(t),sr(t)})}lr()})();const to={data(){return{init:{language:"zh_TW",height:150,menubar:!1,content_css:!1,skin:!1,plugins:this.plugins,toolbar:this.toolbar,quickbars_insert_toolbar:!1,branding:!1}}},components:{Editor:Ya},props:{adminCourseModal:{},value:{type:String,default:""},plugins:{type:[String,Array],default:"quickbars lists advlist image emoticons table"},toolbar:{type:[String,Array],default:"bold italic underline | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify| bullist numlist |outdent indent | undo redo | axupimgs | removeformat | emoticons |table |image rotateleft rotateright | imageoptions"}},methods:{...Hr(Cn,["addCourse","editCourse","uploadImage","uploadImages","clearInputs","selectTempCourse"])},computed:{...Fr(Cn,["tempCourse"])},mounted(){eo.init({})}},no={class:"modal-dialog modal-xl"},ro={class:"modal-content border-0"},ao={class:"modal-header bg-dark text-white"},oo={id:"courseModalLabel",class:"modal-title"},io={key:0},so={key:1},uo={key:2},lo={key:3},co={class:"modal-body"},fo={class:"row"},vo={class:"col-lg-8 mb-4"},mo={class:"row"},po={class:"mb-3 col-md-6"},go=f("label",{for:"title",class:"form-label"},"標題",-1),ho={class:"mb-3 col-md-6"},bo=f("label",{for:"price",class:"form-label"},"圖示",-1),yo=f("a",{href:"https://fonts.google.com/icons?icon.platform=android",target:"_blank",class:"text-decoration-underline"},"圖示庫",-1),Co={class:"material-symbols-outlined"},So={class:"row"},To={class:"mb-3 col-md-6"},Lo=f("label",{for:"price",class:"form-label"},"價格",-1),Ao={class:"mb-3 col-md-6"},wo=f("label",{for:"price",class:"form-label"},"價格單位",-1),Do=f("hr",null,null,-1),Oo={class:"mb-3"},Io=f("label",{for:"description",class:"form-label"},"簡述",-1),ko={class:"mb-3"},No=f("label",{for:"content",class:"form-label"},"說明內容",-1),_o={class:"col-lg-4 mb-4"},$o={class:"mb-2"},Uo={class:"mb-3"},Po=f("h6",null,"列表圖片",-1),Bo={enctype:"multipart/form-data",method:"post"},Eo=["src"],Mo={class:"mb-2"},Ro=f("h6",null,"內容圖片",-1),xo={class:"mb-2"},Vo=["onUpdate:modelValue","id"],zo={enctype:"multipart/form-data",method:"post"},Ho=["id","onChange"],Fo=["src"],jo={class:"col"},qo={class:"form-check"},Wo=f("label",{class:"form-check-label",for:"needSession"},"須預約時段",-1),Go={class:"form-check"},Ko=f("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Jo={class:"modal-footer"};function Qo(d,p,k,U,M,ie){const w=Ze("v-field"),P=Ze("error-message"),D=Ze("editor"),G=Ze("v-form");return E(),Qa(G,{ref:"form",class:"row service-form"},{default:Xa(({errors:H})=>[f("div",no,[f("div",ro,[f("div",ao,[f("h5",oo,[d.tempCourse.id&&d.tempCourse.category=="service"?(E(),R("span",io,"編輯服務")):d.tempCourse.id&&d.tempCourse.category=="course"?(E(),R("span",so,"編輯課程")):!d.tempCourse.id&&d.tempCourse.category=="service"?(E(),R("span",uo,"新增服務")):(E(),R("span",lo,"新增課程"))]),f("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p[0]||(p[0]=g=>d.clearInputs())})]),f("div",co,[f("div",fo,[f("div",vo,[f("div",mo,[f("div",po,[go,W(w,{id:"title",type:"text",name:"標題",class:Ot(["form-control",{"is-invalid":H.標題}]),placeholder:"請輸入標題",modelValue:d.tempCourse.title,"onUpdate:modelValue":p[1]||(p[1]=g=>d.tempCourse.title=g),rules:"required"},null,8,["class","modelValue"]),W(P,{name:"標題",class:"invalid-feedback"})]),f("div",ho,[bo,xr(" ("),yo,xr(") "),W(w,{id:"icon",type:"text",name:"圖示",class:Ot(["form-control",{"is-invalid":H.圖示}]),placeholder:"請輸入圖示名稱",modelValue:d.tempCourse.icon,"onUpdate:modelValue":p[2]||(p[2]=g=>d.tempCourse.icon=g),rules:"required"},null,8,["class","modelValue"]),f("span",Co,Fe(d.tempCourse.icon),1),W(P,{name:"圖示",class:"invalid-feedback"})])]),f("div",So,[f("div",To,[Lo,W(w,{id:"price",type:"number",min:"0",name:"價格",class:Ot(["form-control",{"is-invalid":H.價格}]),placeholder:"請輸入價格",modelValue:d.tempCourse.price,"onUpdate:modelValue":p[3]||(p[3]=g=>d.tempCourse.price=g),rules:"required"},null,8,["class","modelValue"]),W(P,{name:"價格",class:"invalid-feedback"})]),f("div",Ao,[wo,W(w,{id:"unit",type:"text",name:"價格單位",class:Ot(["form-control",{"is-invalid":H.價格單位}]),placeholder:"請輸入價格單位",modelValue:d.tempCourse.unit,"onUpdate:modelValue":p[4]||(p[4]=g=>d.tempCourse.unit=g),rules:"required"},null,8,["class","modelValue"]),W(P,{name:"圖示",class:"invalid-feedback"})])]),Do,f("div",Oo,[Io,W(D,{name:"簡述",modelValue:d.tempCourse.description,"onUpdate:modelValue":p[5]||(p[5]=g=>d.tempCourse.description=g),class:Ot({"is-invalid":H.簡述}),init:M.init,rules:"required"},null,8,["modelValue","class","init"]),W(P,{name:"簡述",class:"invalid-feedback"})]),f("div",ko,[No,W(D,{modelValue:d.tempCourse.content,"onUpdate:modelValue":p[6]||(p[6]=g=>d.tempCourse.content=g),init:M.init},null,8,["modelValue","init"])])]),f("div",_o,[f("div",$o,[f("div",Uo,[Po,bn(f("input",{id:"imageUrl","onUpdate:modelValue":p[7]||(p[7]=g=>d.tempCourse.imageUrl=g),type:"text",class:"form-control form-control-sm mb-2",placeholder:"請輸入圖片連結"},null,512),[[Vr,d.tempCourse.imageUrl]]),f("form",Bo,[f("input",{type:"file",name:"file-to-upload",id:"imageUpload",ref:"file",placeholder:"請選擇圖片",onChange:p[8]||(p[8]=g=>d.uploadImage()),class:"form-control"},null,544)])]),f("img",{class:"img-fluid",src:d.tempCourse.imageUrl,alt:"列表圖片"},null,8,Eo)]),f("div",Mo,[Ro,(E(!0),R(yn,null,wr(d.tempCourse.imagesUrl,(g,x)=>(E(),R("div",{key:x,class:"mb-3"},[f("div",xo,[bn(f("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":se=>d.tempCourse.imagesUrl[x]=se,id:`imageUrl-${x}`},null,8,Vo),[[Vr,d.tempCourse.imagesUrl[x]]]),f("form",zo,[f("input",{type:"file",name:"file-to-upload",id:`imagesUpload-${x}`,class:"form-control imagesUpload",ref_for:!0,ref:"file",placeholder:"請選擇圖片",onChange:se=>d.uploadImages(x)},null,40,Ho)])]),f("img",{class:"img-fluid",src:g,alt:"內容圖片"},null,8,Fo)]))),128))]),f("div",null,[f("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:p[9]||(p[9]=g=>d.tempCourse.imagesUrl.length>1?d.tempCourse.imagesUrl.pop():d.tempCourse.imagesUrl[0]="")}," 刪除圖片 "),f("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:p[10]||(p[10]=g=>d.tempCourse.imagesUrl.push(""))}," 新增次要圖片 ")])]),f("div",jo,[f("div",qo,[bn(f("input",{class:"form-check-input",type:"checkbox",value:"",id:"needSession","true-value":1,"false-value":0,"onUpdate:modelValue":p[11]||(p[11]=g=>d.tempCourse.origin_price=g)},null,512),[[zr,d.tempCourse.origin_price]]),Wo]),f("div",Go,[bn(f("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":p[12]||(p[12]=g=>d.tempCourse.is_enabled=g)},null,512),[[zr,d.tempCourse.is_enabled]]),Ko])])])]),f("div",Jo,[f("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:p[13]||(p[13]=g=>{d.clearInputs(),d.selectTempCourse({imagesUrl:[""]})})}," 取消 "),d.tempCourse.id?(E(),R("button",{key:0,type:"button",class:"btn btn-primary",onClick:p[14]||(p[14]=g=>d.editCourse(d.tempCourse,k.adminCourseModal))}," 確認編輯 ")):(E(),R("button",{key:1,type:"submit",class:"btn btn-primary",onClick:p[15]||(p[15]=g=>d.addCourse(d.tempCourse,k.adminCourseModal))}," 確認新增 "))])])])]),_:1},512)}const Xo=jr(to,[["render",Qo]]),Zo={data(){return{adminCourseModal:null}},computed:{...Fr(Cn,["tempCourse","courses","services","service_pagination","course_pagination"])},components:{Pagination:Ka,AdminCourseModal:Xo},methods:{...Hr(Cn,["getAdminCourses","getAdminServices","selectTempCourse","deleteCourse"])},mounted(){this.getAdminServices(),this.getAdminCourses(),this.adminCourseModal=new Za("#adminCourseModal")}},Yo={class:"container"},ei={class:"text-end mt-4"},ti={class:"table mt-4"},ni=f("thead",null,[f("tr",null,[f("th",null,"服務名稱"),f("th",null,"服務簡述"),f("th",{width:"120"}," 價格 "),f("th",{width:"100"}," 是否啟用 "),f("th",{width:"120"}," 編輯 ")])],-1),ri={class:"text-end"},ai={key:0,class:"text-success"},oi={key:1},ii={class:"btn-group"},si=["onClick"],ui=["onClick"],li={class:"container"},ci={class:"text-end mt-4"},fi={class:"table mt-4"},di=f("thead",null,[f("tr",null,[f("th",null,"課程名稱"),f("th",null,"課程簡述"),f("th",{width:"120"}," 價格 "),f("th",{width:"100"}," 是否啟用 "),f("th",{width:"120"}," 編輯 ")])],-1),vi={class:"text-end"},mi={key:0,class:"text-success"},pi={key:1},gi={class:"btn-group"},hi=["onClick"],bi=["onClick"],yi={id:"adminCourseModal",ref:"adminCourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"courseModalLabel","aria-hidden":"true"};function Ci(d,p,k,U,M,ie){const w=Ze("pagination"),P=Ze("admin-course-modal");return E(),R(yn,null,[f("div",Yo,[f("div",ei,[f("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:p[0]||(p[0]=D=>d.selectTempCourse({imagesUrl:[""],category:"service",description:"",content:"",origin_price:0}))}," 建立新的服務 ")]),f("table",ti,[ni,f("tbody",null,[(E(!0),R(yn,null,wr(d.services,D=>(E(),R("tr",{key:D.id},[f("td",null,Fe(D.title),1),f("td",null,Fe(D.description),1),f("td",ri,Fe(d.$filters.currency(D.price)),1),f("td",null,[D.is_enabled==1?(E(),R("span",ai,"啟用")):(E(),R("span",oi,"未啟用"))]),f("td",null,[f("div",ii,[f("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:G=>d.selectTempCourse(JSON.parse(JSON.stringify(D)))}," 編輯 ",8,si),f("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:G=>d.deleteCourse(D.category,D.id)}," 刪除 ",8,ui)])])]))),128))])]),W(w,{pages:d.service_pagination,onChangePage:d.getAdminServices},null,8,["pages","onChangePage"])]),f("div",li,[f("div",ci,[f("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:p[1]||(p[1]=D=>d.selectTempCourse({imagesUrl:[""],category:"course",description:"",content:"",origin_price:0}))}," 建立新的課程 ")]),f("table",fi,[di,f("tbody",null,[(E(!0),R(yn,null,wr(d.courses,D=>(E(),R("tr",{key:D.id},[f("td",null,Fe(D.title),1),f("td",null,Fe(D.description),1),f("td",vi,Fe(d.$filters.currency(D.price)),1),f("td",null,[D.is_enabled==1?(E(),R("span",mi,"啟用")):(E(),R("span",pi,"未啟用"))]),f("td",null,[f("div",gi,[f("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:G=>d.selectTempCourse(JSON.parse(JSON.stringify(D)))}," 編輯 ",8,hi),f("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:G=>d.deleteCourse(D.category,D.id)}," 刪除 ",8,bi)])])]))),128))])]),W(w,{pages:d.course_pagination,onChangePage:d.getAdminCourses},null,8,["pages","onChangePage"])]),f("div",yi,[W(P,{"admin-course-modal":M.adminCourseModal},null,8,["admin-course-modal"])],512)],64)}const Ai=jr(Zo,[["render",Ci]]);export{Ai as default};
