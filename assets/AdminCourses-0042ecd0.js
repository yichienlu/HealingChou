import{P as Ga}from"./PaginationComponent-e4fd9da6.js";import{G as Ka,H as xe,I as zr,J as Fr,_ as Vr,r as Ar,o as E,c as M,d as f,j as He,v as Dt,F as bn,h as wr,g as xr,t as Ve,e as Ot,E as Hr,M as Ja}from"./index-96b17744.js";import{E as Qa,t as Xa}from"./Editor-76be1537.js";const{VITE_URL:ze,VITE_PATH:Fe}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"healing_chou",BASE_URL:"/HealingChou/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},yn=Ka("adminCoursesStore",{state:()=>({tempCourse:{imagesUrl:[""]},courses:[],services:[],service_pagination:{},course_pagination:{}}),actions:{getAdminServices(d=1){xe.get(`${ze}/api/${Fe}/admin/products?page=${d}&category=service`).then(p=>{this.services=p.data.products,this.service_pagination=p.data.pagination})},getAdminCourses(d=1){xe.get(`${ze}/api/${Fe}/admin/products?page=${d}&category=course`).then(p=>{this.courses=p.data.products,this.course_pagination=p.data.pagination})},addCourse(d,p){xe.post(`${ze}/api/${Fe}/admin/product`,{data:d}).then($=>{this.clearInputs(),p.hide(),alert($.data.message),this.tempCourse={imagesUrl:[""]},d.category=="service"?this.getAdminServices():this.getAdminCourses()}).catch($=>{alert($.response.data.message)})},editCourse(d,p){xe.put(`${ze}/api/${Fe}/admin/product/${d.id}`,{data:d}).then($=>{this.clearInputs(),p.hide(),alert($.data.message),this.tempCourse={imagesUrl:[""]},d.category=="service"?this.getAdminServices():this.getAdminCourses()}).catch($=>{console.dir($)})},deleteCourse(d){window.confirm("確定要刪除?")&&xe.delete(`${ze}/api/${Fe}/admin/product/${d}`).then(p=>{this.getAdminCourses()}).catch(p=>{console.dir(p)})},uploadImage(){const p=document.querySelector("#imageUpload").files[0],$=new FormData;$.append("file-to-upload",p),xe.post(`${ze}/api/${Fe}/admin/upload`,$).then(P=>{this.tempCourse.imageUrl=P.data.imageUrl}).catch(P=>{console.log(P.response)})},uploadImages(d){const $=document.querySelectorAll(".imagesUpload")[d].files[0],P=new FormData;P.append("file-to-upload",$),xe.post(`${ze}/api/${Fe}/admin/upload`,P).then(R=>{this.tempCourse.imagesUrl[d]=R.data.imageUrl}).catch(R=>{console.log(R.response)})},clearInputs(){document.querySelector("#imageUrl").value=null,Array.isArray(this.tempCourse.imagesUrl)&&(this.images=[...document.querySelectorAll("#imagesUrl")],this.images.forEach(function(d){d.value=null}))},selectTempCourse(d){this.tempCourse=d}}});(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},$=function(e){return function(n){return p(n)===e}},P=function(e){return function(n){return typeof n===e}},R=$("string"),re=$("object"),N=$("array"),C=P("boolean"),D=P("function"),j=P("number"),le=function(){},L=function(e){return function(){return e}},ce=function(e){return e},Oe=function(e,n){return e===n},je=function(e){return function(n){return!e(n)}},fe=L(!1),K=L(!0),Le=function(){return ve},ve=function(){var e=function(o){return o()},n=ce,r={fold:function(o,s){return o()},isSome:fe,isNone:K,getOr:n,getOrThunk:e,getOrDie:function(o){throw new Error(o||"error: getOrDie called on none.")},getOrNull:L(null),getOrUndefined:L(void 0),or:n,orThunk:e,map:Le,each:le,bind:Le,exists:fe,forall:K,filter:function(){return Le()},toArray:function(){return[]},toString:L("none()")};return r}(),de=function(e){var n=L(e),r=function(){return s},o=function(l){return l(e)},s={fold:function(l,m){return m(e)},isSome:K,isNone:fe,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(l){return de(l(e))},each:function(l){l(e)},bind:o,exists:o,forall:o,filter:function(l){return l(e)?s:ve},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return s},Ae=function(e){return e==null?ve:de(e)},O={some:de,none:Le,from:Ae},Ie=Array.prototype.slice,qe=Array.prototype.push,k=function(e,n){for(var r=e.length,o=new Array(r),s=0;s<r;s++){var l=e[s];o[s]=n(l,s)}return o},z=function(e,n){for(var r=0,o=e.length;r<o;r++){var s=e[r];n(s,r)}},ee=function(e,n){for(var r=[],o=0,s=e.length;o<s;o++){var l=e[o];n(l,o)&&r.push(l)}return r},Ze=function(e,n){if(e.length===0)return[];for(var r=n(e[0]),o=[],s=[],l=0,m=e.length;l<m;l++){var h=e[l],y=n(h);y!==r&&(o.push(s),s=[]),r=y,s.push(h)}return s.length!==0&&o.push(s),o},Ne=function(e,n,r){return z(e,function(o,s){r=n(r,o,s)}),r},v=function(e,n,r){for(var o=0,s=e.length;o<s;o++){var l=e[o];if(n(l,o))return O.some(l);if(r(l,o))break}return O.none()},b=function(e,n){return v(e,n,fe)},A=function(e){for(var n=[],r=0,o=e.length;r<o;++r){if(!N(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);qe.apply(n,e[r])}return n},w=function(e,n){return A(k(e,n))},_=function(e){var n=Ie.call(e,0);return n.reverse(),n},U=function(e,n){return n>=0&&n<e.length?O.some(e[n]):O.none()},J=function(e){return U(e,0)},Q=function(e){return U(e,e.length-1)},X=function(e,n){for(var r=0;r<e.length;r++){var o=n(e[r],r);if(o.isSome())return o}return O.none()},ke=function(){return ke=Object.assign||function(n){for(var r,o=1,s=arguments.length;o<s;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},ke.apply(this,arguments)};function We(e,n,r){if(r||arguments.length===2)for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var Ye=function(e){var n=!1,r;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n||(n=!0,r=e.apply(null,o)),r}},et=function(e,n,r,o){var s=e.isiOS()&&/ipad/i.test(r)===!0,l=e.isiOS()&&!s,m=e.isiOS()||e.isAndroid(),h=m||o("(pointer:coarse)"),y=s||!l&&m&&o("(min-device-width:768px)"),T=l||m&&!y,I=n.isSafari()&&e.isiOS()&&/safari/i.test(r)===!1,Y=!T&&!y&&!I;return{isiPad:L(s),isiPhone:L(l),isTablet:L(y),isPhone:L(T),isTouch:L(h),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:L(I),isDesktop:L(Y)}},Cn=function(e,n){for(var r=0;r<e.length;r++){var o=e[r];if(o.test(n))return o}},Sn=function(e,n){var r=Cn(e,n);if(!r)return{major:0,minor:0};var o=function(s){return Number(n.replace(r,"$"+s))};return Ue(o(1),o(2))},_e=function(e,n){var r=String(n).toLowerCase();return e.length===0?It():Sn(e,r)},It=function(){return Ue(0,0)},Ue=function(e,n){return{major:e,minor:n}},$e={nu:Ue,detect:_e,unknown:It},ae=function(e,n){return X(n.brands,function(r){var o=r.brand.toLowerCase();return b(e,function(s){var l;return o===((l=s.brand)===null||l===void 0?void 0:l.toLowerCase())}).map(function(s){return{current:s.name,version:$e.nu(parseInt(r.version,10),0)}})})},Nt=function(e,n){var r=String(n).toLowerCase();return b(e,function(o){return o.search(r)})},Tn=function(e,n){return Nt(e,n).map(function(r){var o=$e.detect(r.versionRegexes,n);return{current:r.name,version:o}})},kt=function(e,n){return Nt(e,n).map(function(r){var o=$e.detect(r.versionRegexes,n);return{current:r.name,version:o}})},x=function(e,n){return e.indexOf(n)!==-1},Ln=function(e){return function(n){return n.replace(e,"")}},An=Ln(/^\s+|\s+$/g),wn=function(e){return e.length>0},Dn=function(e){return!wn(e)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,te=function(e){return function(n){return x(n,e)}},On=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return x(e,"edge/")&&x(e,"chrome")&&x(e,"safari")&&x(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:function(e){return x(e,"chrome")&&!x(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return x(e,"msie")||x(e,"trident")}},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:te("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:te("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(x(e,"safari")||x(e,"mobile/"))&&x(e,"applewebkit")}}],In=[{name:"Windows",search:te("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return x(e,"iphone")||x(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:te("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:te("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:te("linux"),versionRegexes:[]},{name:"Solaris",search:te("sunos"),versionRegexes:[]},{name:"FreeBSD",search:te("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:te("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_t={browsers:L(On),oses:L(In)},Ut="Edge",$t="Chrome",nt="IE",Pt="Opera",oe="Firefox",Pe="Safari",Bt=function(){return Et({current:void 0,version:$e.unknown()})},Et=function(e){var n=e.current,r=e.version,o=function(s){return function(){return n===s}};return{current:n,version:r,isEdge:o(Ut),isChrome:o($t),isIE:o(nt),isOpera:o(Pt),isFirefox:o(oe),isSafari:o(Pe)}},Mt={unknown:Bt,nu:Et,edge:L(Ut),chrome:L($t),ie:L(nt),opera:L(Pt),firefox:L(oe),safari:L(Pe)},Rt="Windows",rt="iOS",at="Android",F="Linux",ot="OSX",it="Solaris",st="FreeBSD",me="ChromeOS",xt=function(){return ut({current:void 0,version:$e.unknown()})},ut=function(e){var n=e.current,r=e.version,o=function(s){return function(){return n===s}};return{current:n,version:r,isWindows:o(Rt),isiOS:o(rt),isAndroid:o(at),isOSX:o(ot),isLinux:o(F),isSolaris:o(it),isFreeBSD:o(st),isChromeOS:o(me)}},pe={unknown:xt,nu:ut,windows:L(Rt),ios:L(rt),android:L(at),linux:L(F),osx:L(ot),solaris:L(it),freebsd:L(st),chromeos:L(me)},Nn=function(e,n,r){var o=_t.browsers(),s=_t.oses(),l=n.bind(function(y){return ae(o,y)}).orThunk(function(){return Tn(o,e)}).fold(Mt.unknown,Mt.nu),m=kt(s,e).fold(pe.unknown,pe.nu),h=et(m,l,e,r);return{browser:l,os:m,deviceType:h}},kn={detect:Nn},_n=function(e){return window.matchMedia(e).matches},Ht=Ye(function(){return kn.detect(navigator.userAgent,O.from(navigator.userAgentData),_n)}),zt=function(){return Ht()},Ft=function(e,n,r){return(e.compareDocumentPosition(n)&r)!==0},Vt=function(e,n){return Ft(e,n,Node.DOCUMENT_POSITION_CONTAINED_BY)},lt=1,jt=function(e,n){var r=n||document,o=r.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ge(o.childNodes[0])},qt=function(e,n){var r=n||document,o=r.createElement(e);return ge(o)},Un=function(e,n){var r=n||document,o=r.createTextNode(e);return ge(o)},ge=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},$n=function(e,n,r){return O.from(e.dom.elementFromPoint(n,r)).map(ge)},B={fromHtml:jt,fromTag:qt,fromText:Un,fromDom:ge,fromPoint:$n},Pn=function(e,n){var r=e.dom;if(r.nodeType!==lt)return!1;var o=r;if(o.matches!==void 0)return o.matches(n);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(n);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},ct=function(e,n){return e.dom===n.dom},Bn=function(e,n){var r=e.dom,o=n.dom;return r===o?!1:r.contains(o)},En=function(e,n){return Vt(e.dom,n.dom)},ft=function(e,n){return zt().browser.isIE()?En(e,n):Bn(e,n)},q=Pn,vt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Mn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ie=tinymce.util.Tools.resolve("tinymce.util.VK"),Wt=Object.keys,he=function(e,n){for(var r=Wt(e),o=0,s=r.length;o<s;o++){var l=r[o],m=e[l];n(m,l)}},Ge=function(e){return function(n,r){e[r]=n}},Gt=function(e,n,r,o){var s={};return he(e,function(l,m){(n(l,m)?r:o)(l,m)}),s},Rn=function(e,n){var r={};return Gt(e,n,Ge(r),le),r};typeof window<"u"||Function("return this;")();var dt=function(e){var n=e.dom.nodeName;return n.toLowerCase()},xn=function(e){return e.dom.nodeType},Hn=function(e){return function(n){return xn(n)===e}},Kt=Hn(lt),Jt=function(e){return function(n){return Kt(n)&&dt(n)===e}},zn=function(e,n,r){if(R(r)||C(r)||j(r))e.setAttribute(n,r+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple")},Be=function(e,n){var r=e.dom;he(n,function(o,s){zn(r,s,o)})},mt=function(e){return Ne(e.dom.attributes,function(n,r){return n[r.name]=r.value,n},{})},be=function(e){return O.from(e.dom.parentNode).map(B.fromDom)},pt=function(e){return k(e.dom.childNodes,B.fromDom)},Qt=function(e,n){var r=e.dom.childNodes;return O.from(r[n]).map(B.fromDom)},gt=function(e){return Qt(e,0)},ht=function(e){return Qt(e,e.dom.childNodes.length-1)},Xt=function(e,n){var r=be(e);r.each(function(o){o.dom.insertBefore(n.dom,e.dom)})},Ee=function(e,n){e.dom.appendChild(n.dom)},Zt=function(e,n){z(n,function(r){Xt(e,r)})},bt=function(e,n){z(n,function(r){Ee(e,r)})},Yt=function(e){var n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},en=function(e,n){return B.fromDom(e.dom.cloneNode(n))},Fn=function(e){return en(e,!0)},we=function(e,n){var r=B.fromTag(n),o=mt(e);return Be(r,o),r},yt=function(e,n){var r=we(e,n);Xt(e,r);var o=pt(e);return bt(r,o),Yt(e),r},Ct=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Z=tinymce.util.Tools.resolve("tinymce.util.Tools"),St=function(e){return function(n){return n&&n.nodeName.toLowerCase()===e}},Me=function(e){return function(n){return n&&e.test(n.nodeName)}},ye=function(e){return e&&e.nodeType===3},W=Me(/^(OL|UL|DL)$/),Vn=Me(/^(OL|UL)$/),tn=St("ol"),Ke=Me(/^(LI|DT|DD)$/),nn=Me(/^(DT|DD)$/),jn=Me(/^(TH|TD)$/),Ce=St("br"),qn=function(e){return e.parentNode.firstChild===e},Tt=function(e,n){return n&&!!e.schema.getTextBlockElements()[n.nodeName]},rn=function(e,n){return e&&e.nodeName in n},Wn=function(e,n){return Ce(n)?e.isBlock(n.nextSibling)&&!Ce(n.previousSibling):!1},ne=function(e,n,r){var o=e.isEmpty(n);return r&&e.select("span[data-mce-type=bookmark]",n).length>0?!1:o},an=function(e,n){return e.isChildOf(n,e.getRoot())},Gn=function(e){return e.getParam("lists_indent_on_tab",!0)},Kn=function(e){var n=e.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},Jn=function(e){return e.getParam("forced_root_block_attrs",{})},on=function(e,n){var r=e.dom,o=e.schema.getBlockElements(),s=r.createFragment(),l=Kn(e),m,h,y;if(l&&(h=r.create(l),h.tagName===l.toUpperCase()&&r.setAttribs(h,Jn(e)),rn(n.firstChild,o)||s.appendChild(h)),n)for(;m=n.firstChild;){var T=m.nodeName;!y&&(T!=="SPAN"||m.getAttribute("data-mce-type")!=="bookmark")&&(y=!0),rn(m,o)?(s.appendChild(m),h=null):l?(h||(h=r.create(l),s.appendChild(h)),h.appendChild(m)):s.appendChild(m)}return l?y||h.appendChild(r.create("br",{"data-mce-bogus":"1"})):s.appendChild(r.create("br")),s},se=Ct.DOM,Qn=function(e,n,r){var o=function(T){Z.each(s,function(I){T.parentNode.insertBefore(I,r.parentNode)}),se.remove(T)},s=se.select('span[data-mce-type="bookmark"]',n),l=on(e,r),m=se.createRng();m.setStartAfter(r),m.setEndAfter(n);for(var h=m.extractContents(),y=h.firstChild;y;y=y.firstChild)if(y.nodeName==="LI"&&e.dom.isEmpty(y)){se.remove(y);break}e.dom.isEmpty(h)||se.insertAfter(h,n),se.insertAfter(l,n),ne(e.dom,r.parentNode)&&o(r.parentNode),se.remove(r),ne(e.dom,n)&&se.remove(n)},Xn=Jt("dd"),sn=Jt("dt"),Zn=function(e,n){Xn(n)?yt(n,"dt"):sn(n)&&be(n).each(function(r){return Qn(e,r.dom,n.dom)})},Yn=function(e){sn(e)&&yt(e,"dd")},er=function(e,n,r){n==="Indent"?z(r,Yn):z(r,function(o){return Zn(e,o)})},un=function(e,n){if(ye(e))return{container:e,offset:n};var r=vt.getNode(e,n);return ye(r)?{container:r,offset:n>=e.childNodes.length?r.data.length:0}:r.previousSibling&&ye(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&ye(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:n}},Je=function(e){var n=e.cloneRange(),r=un(e.startContainer,e.startOffset);n.setStart(r.container,r.offset);var o=un(e.endContainer,e.endOffset);return n.setEnd(o.container,o.offset),n},ln=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),De=function(e,n){var r=n||e.selection.getStart(!0);return e.dom.getParent(r,"OL,UL,DL",Se(e,r))},tr=function(e,n){return e&&n.length===1&&n[0]===e},nr=function(e){return ee(e.querySelectorAll("ol,ul,dl"),W)},rr=function(e){var n=De(e),r=e.selection.getSelectedBlocks();return tr(n,r)?nr(n):ee(r,function(o){return W(o)&&n!==o})},ar=function(e,n){var r=Z.map(n,function(o){var s=e.dom.getParent(o,"li,dd,dt",Se(e,o));return s||o});return ln.unique(r)},Lt=function(e){var n=e.selection.getSelectedBlocks();return ee(ar(e,n),Ke)},or=function(e){return ee(Lt(e),nn)},Se=function(e,n){var r=e.dom.getParents(n,"TD,TH");return r.length>0?r[0]:e.getBody()},Qe=function(e,n){var r=e.dom.getParents(n,"ol,ul",Se(e,n));return Q(r)},ir=function(e){var n=Qe(e,e.selection.getStart()),r=ee(e.selection.getSelectedBlocks(),Vn);return n.toArray().concat(r)},sr=function(e){var n=ir(e);return cn(e,n)},cn=function(e,n){var r=k(n,function(o){return Qe(e,o).getOr(o)});return ln.unique(r)},fn=function(e,n,r){return r===void 0&&(r=Oe),e.exists(function(o){return r(o,n)})},vn=function(e,n,r){return e.isSome()&&n.isSome()?O.some(r(e.getOrDie(),n.getOrDie())):O.none()},ur=function(e,n){var r=n||document,o=r.createDocumentFragment();return z(e,function(s){o.appendChild(s.dom)}),B.fromDom(o)},t=function(e,n,r){return e.fire("ListMutation",{action:n,element:r})},a=function(e){return e.style!==void 0&&D(e.style.getPropertyValue)},i=function(e,n,r){if(!R(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);a(e)&&e.style.setProperty(n,r)},u=function(e,n,r){var o=e.dom;i(o,n,r)},c=function(e,n){Ee(e.item,n.list)},g=function(e){for(var n=1;n<e.length;n++)c(e[n-1],e[n])},S=function(e,n){vn(Q(e),J(n),c)},H=function(e,n){var r={list:B.fromTag(n,e),item:B.fromTag("li",e)};return Ee(r.list,r.item),r},ue=function(e,n,r){for(var o=[],s=0;s<r;s++)o.push(H(e,n.listType));return o},Te=function(e,n){for(var r=0;r<e.length-1;r++)u(e[r].item,"list-style-type","none");Q(e).each(function(o){Be(o.list,n.listAttributes),Be(o.item,n.itemAttributes),bt(o.item,n.content)})},G=function(e,n){dt(e.list)!==n.listType&&(e.list=yt(e.list,n.listType)),Be(e.list,n.listAttributes)},Re=function(e,n,r){var o=B.fromTag("li",e);return Be(o,n),bt(o,r),o},lr=function(e,n){Ee(e.list,n),e.item=n},cr=function(e,n,r){var o=n.slice(0,r.depth);return Q(o).each(function(s){var l=Re(e,r.itemAttributes,r.content);lr(s,l),G(s,r)}),o},fr=function(e,n,r){var o=ue(e,r,r.depth-n.length);return g(o),Te(o,r),S(n,o),n.concat(o)},vr=function(e,n){var r=Ne(n,function(o,s){return s.depth>o.length?fr(e,o,s):cr(e,o,s)},[]);return J(r).map(function(o){return o.list})},V=function(e){return q(e,"OL,UL")},dn=function(e){return gt(e).exists(V)},dr=function(e){return ht(e).exists(V)},Dr=function(e){return e.depth>0},jr=function(e){return e.isSelected},qr=function(e){var n=pt(e),r=dr(e)?n.slice(0,-1):n;return k(r,Fn)},Wr=function(e,n,r){return be(e).filter(Kt).map(function(o){return{depth:n,dirty:!1,isSelected:r,content:qr(e),itemAttributes:mt(e),listAttributes:mt(o),listType:dt(o)}})},Gr=function(e,n){switch(e){case"Indent":n.depth++;break;case"Outdent":n.depth--;break;case"Flatten":n.depth=0}n.dirty=!0},Kr=function(e,n){e.listType=n.listType,e.listAttributes=ke({},n.listAttributes)},Jr=function(e){e.listAttributes=Rn(e.listAttributes,function(n,r){return r!=="start"})},Qr=function(e,n){var r=e[n].depth,o=function(l){return l.depth===r&&!l.dirty},s=function(l){return l.depth<r};return v(_(e.slice(0,n)),o,s).orThunk(function(){return v(e.slice(n+1),o,s)})},Or=function(e){return z(e,function(n,r){Qr(e,r).fold(function(){n.dirty&&Jr(n)},function(o){return Kr(n,o)})}),e},Xr=function(e){var n=e,r=function(){return n},o=function(s){n=s};return{get:r,set:o}},Zr=function(e,n,r,o){return gt(o).filter(V).fold(function(){n.each(function(m){ct(m.start,o)&&r.set(!0)});var s=Wr(o,e,r.get());n.each(function(m){ct(m.end,o)&&r.set(!1)});var l=ht(o).filter(V).map(function(m){return mn(e,n,r,m)}).getOr([]);return s.toArray().concat(l)},function(s){return mn(e,n,r,s)})},mn=function(e,n,r,o){return w(pt(o),function(s){var l=V(s)?mn:Zr,m=e+1;return l(m,n,r,s)})},Yr=function(e,n){var r=Xr(!1),o=0;return k(e,function(s){return{sourceList:s,entries:mn(o,n,r,s)}})},ea=function(e,n){var r=Or(n);return k(r,function(o){var s=ur(o.content);return B.fromDom(on(e,s.dom))})},ta=function(e,n){var r=Or(n);return vr(e.contentDocument,r).toArray()},na=function(e,n){return w(Ze(n,Dr),function(r){var o=J(r).exists(Dr);return o?ta(e,r):ea(e,r)})},ra=function(e,n){z(ee(e,jr),function(r){return Gr(n,r)})},aa=function(e){var n=k(Lt(e),B.fromDom);return vn(b(n,je(dn)),b(_(n),je(dn)),function(r,o){return{start:r,end:o}})},oa=function(e,n,r){var o=Yr(n,aa(e));z(o,function(s){ra(s.entries,r);var l=na(e,s.entries);z(l,function(m){t(e,r==="Indent"?"IndentList":"OutdentList",m.dom)}),Zt(s.sourceList,l),Yt(s.sourceList)})},mr=function(e,n){var r=k(sr(e),B.fromDom),o=k(or(e),B.fromDom),s=!1;if(r.length||o.length){var l=e.selection.getBookmark();oa(e,r,n),er(e,n,o),e.selection.moveToBookmark(l),e.selection.setRng(Je(e.selection.getRng())),e.nodeChanged(),s=!0}return s},Ir=function(e){return mr(e,"Indent")},pr=function(e){return mr(e,"Outdent")},pn=function(e){return mr(e,"Flatten")},ia=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Xe=Ct.DOM,At=function(e){var n={},r=function(o){var s=e[o?"startContainer":"endContainer"],l=e[o?"startOffset":"endOffset"];if(s.nodeType===1){var m=Xe.create("span",{"data-mce-type":"bookmark"});s.hasChildNodes()?(l=Math.min(l,s.childNodes.length-1),o?s.insertBefore(m,s.childNodes[l]):Xe.insertAfter(m,s.childNodes[l])):s.appendChild(m),s=m,l=0}n[o?"startContainer":"endContainer"]=s,n[o?"startOffset":"endOffset"]=l};return r(!0),e.collapsed||r(),n},wt=function(e){var n=function(o){var s,l=function(y){for(var T=y.parentNode.firstChild,I=0;T;){if(T===y)return I;(T.nodeType!==1||T.getAttribute("data-mce-type")!=="bookmark")&&I++,T=T.nextSibling}return-1},m=s=e[o?"startContainer":"endContainer"],h=e[o?"startOffset":"endOffset"];m&&(m.nodeType===1&&(h=l(m),m=m.parentNode,Xe.remove(s),!m.hasChildNodes()&&Xe.isBlock(m)&&m.appendChild(Xe.create("br"))),e[o?"startContainer":"endContainer"]=m,e[o?"startOffset":"endOffset"]=h)};n(!0),n();var r=Xe.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),Je(r)},gn=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Nr=function(e){return/\btox\-/.test(e.className)},gr=function(e,n,r){var o=function(l){var m=v(l.parents,W,jn).filter(function(h){return h.nodeName===n&&!Nr(h)}).isSome();r(m)},s=e.dom.getParents(e.selection.getNode());return o({parents:s}),e.on("NodeChange",o),function(){return e.off("NodeChange",o)}},sa=function(e,n,r){var o=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(n,"list-style-type",o)},kr=function(e,n){Z.each(n,function(r,o){e.setAttribute(o,r)})},ua=function(e,n,r){kr(n,r["list-attributes"]),Z.each(e.select("li",n),function(o){kr(o,r["list-item-attributes"])})},hn=function(e,n,r){sa(e,n,r),ua(e,n,r)},la=function(e,n,r){Z.each(r,function(o){var s;return e.setStyle(n,(s={},s[o]="",s))})},_r=function(e,n,r,o){var s=n[r?"startContainer":"endContainer"],l=n[r?"startOffset":"endOffset"];for(s.nodeType===1&&(s=s.childNodes[Math.min(l,s.childNodes.length-1)]||s),!r&&Ce(s.nextSibling)&&(s=s.nextSibling);s.parentNode!==o;){if(Tt(e,s)||/^(TD|TH)$/.test(s.parentNode.nodeName))return s;s=s.parentNode}return s},ca=function(e,n,r){for(var o=[],s=e.dom,l=_r(e,n,!0,r),m=_r(e,n,!1,r),h,y=[],T=l;T&&(y.push(T),T!==m);T=T.nextSibling);return Z.each(y,function(I){if(Tt(e,I)){o.push(I),h=null;return}if(s.isBlock(I)||Ce(I)){Ce(I)&&s.remove(I),h=null;return}var Y=I.nextSibling;if(ia.isBookmarkNode(I)&&(W(Y)||Tt(e,Y)||!Y&&I.parentNode===r)){h=null;return}h||(h=s.create("p"),I.parentNode.insertBefore(h,I),o.push(h)),h.appendChild(I)}),o},fa=function(e,n,r){var o=e.getStyle(n,"list-style-type"),s=r?r["list-style-type"]:"";return s=s===null?"":s,o===s},hr=function(e,n,r){var o=e.selection.getRng(),s="LI",l=Se(e,e.selection.getStart(!0)),m=e.dom;if(m.getContentEditable(e.selection.getNode())!=="false"){n=n.toUpperCase(),n==="DL"&&(s="DT");var h=At(o),y=ca(e,o,l);Z.each(y,function(T){var I,Y=T.previousSibling,Wa=T.parentNode;Ke(Wa)||(Y&&W(Y)&&Y.nodeName===n&&fa(m,Y,r)?(I=Y,T=m.rename(T,s),Y.appendChild(T)):(I=m.create(n),T.parentNode.insertBefore(I,T),I.appendChild(T),T=m.rename(T,s)),la(m,T,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),hn(m,I,r),br(e.dom,I))}),e.selection.setRng(wt(h))}},va=function(e,n){return e&&n&&W(e)&&e.nodeName===n.nodeName},da=function(e,n,r){var o=e.getStyle(n,"list-style-type",!0),s=e.getStyle(r,"list-style-type",!0);return o===s},ma=function(e,n){return e.className===n.className},Ur=function(e,n,r){return va(n,r)&&da(e,n,r)&&ma(n,r)},br=function(e,n){var r,o;if(r=n.nextSibling,Ur(e,n,r)){for(;o=r.firstChild;)n.appendChild(o);e.remove(r)}if(r=n.previousSibling,Ur(e,n,r)){for(;o=r.lastChild;)n.insertBefore(o,n.firstChild);e.remove(r)}},pa=function(e,n,r,o){if(n.nodeName!==r){var s=e.dom.rename(n,r);hn(e.dom,s,o),t(e,gn(r),s)}else hn(e.dom,n,o),t(e,gn(r),n)},ga=function(e,n,r,o,s){var l=W(n);if(l&&n.nodeName===o&&!$r(s))pn(e);else{hr(e,o,s);var m=At(e.selection.getRng()),h=l?We([n],r,!0):r;Z.each(h,function(y){pa(e,y,o,s)}),e.selection.setRng(wt(m))}},$r=function(e){return"list-style-type"in e},ha=function(e,n,r,o){if(n!==e.getBody())if(n)if(n.nodeName===r&&!$r(o)&&!Nr(n))pn(e);else{var s=At(e.selection.getRng());hn(e.dom,n,o);var l=e.dom.rename(n,r);br(e.dom,l),e.selection.setRng(wt(s)),hr(e,r,o),t(e,gn(r),l)}else hr(e,r,o),t(e,gn(r),n)},yr=function(e,n,r){var o=De(e),s=rr(e),l=re(r)?r:{};s.length>0?ga(e,o,s,n,l):ha(e,o,n,l)},Pr=Ct.DOM,ba=function(e,n){var r=n.parentNode;if(r.nodeName==="LI"&&r.firstChild===n){var o=r.previousSibling;o&&o.nodeName==="LI"?(o.appendChild(n),ne(e,r)&&Pr.remove(r)):Pr.setStyle(r,"listStyleType","none")}if(W(r)){var o=r.previousSibling;o&&o.nodeName==="LI"&&o.appendChild(n)}},ya=function(e,n){var r=Z.grep(e.select("ol,ul",n));Z.each(r,function(o){ba(e,o)})},Br=function(e,n,r,o){var s=n.startContainer,l=n.startOffset;if(ye(s)&&(r?l<s.data.length:l>0))return s;var m=e.schema.getNonEmptyElements();s.nodeType===1&&(s=vt.getNode(s,l));var h=new Mn(s,o);for(r&&Wn(e.dom,s)&&h.next();s=h[r?"next":"prev2"]();)if(s.nodeName==="LI"&&!s.hasChildNodes()||m[s.nodeName]||ye(s)&&s.data.length>0)return s},Er=function(e,n){var r=n.childNodes;return r.length===1&&!W(r[0])&&e.isBlock(r[0])},Ca=function(e,n){Er(e,n)&&e.remove(n.firstChild,!0)},Sa=function(e,n,r){var o,s=Er(e,r)?r.firstChild:r;if(Ca(e,n),!ne(e,n,!0))for(;o=n.firstChild;)s.appendChild(o)},Cr=function(e,n,r){var o,s=n.parentNode;if(!(!an(e,n)||!an(e,r))){W(r.lastChild)&&(o=r.lastChild),s===r.lastChild&&Ce(s.previousSibling)&&e.remove(s.previousSibling);var l=r.lastChild;l&&Ce(l)&&n.hasChildNodes()&&e.remove(l),ne(e,r,!0)&&e.$(r).empty(),Sa(e,n,r),o&&r.appendChild(o);var m=ft(B.fromDom(r),B.fromDom(n)),h=m?e.getParents(n,W,r):[];e.remove(n),z(h,function(y){ne(e,y)&&y!==e.getRoot()&&e.remove(y)})}},Ta=function(e,n,r){e.dom.$(r).empty(),Cr(e.dom,n,r),e.selection.setCursorLocation(r,0)},La=function(e,n,r,o){var s=e.dom;if(s.isEmpty(o))Ta(e,r,o);else{var l=At(n);Cr(s,r,o),e.selection.setRng(wt(l))}},Aa=function(e,n,r,o){var s=At(n);Cr(e.dom,r,o);var l=wt(s);e.selection.setRng(l)},wa=function(e,n){var r=e.dom,o=e.selection,s=o.getStart(),l=Se(e,s),m=r.getParent(o.getStart(),"LI",l);if(m){var h=m.parentNode;if(h===e.getBody()&&ne(r,h))return!0;var y=Je(o.getRng()),T=r.getParent(Br(e,y,n,l),"LI",l);if(T&&T!==m)return e.undoManager.transact(function(){n?La(e,y,T,m):qn(m)?pr(e):Aa(e,y,m,T)}),!0;if(!T&&!n&&y.startOffset===0&&y.endOffset===0)return e.undoManager.transact(function(){pn(e)}),!0}return!1},Da=function(e,n,r){var o=e.getParent(n.parentNode,e.isBlock,r);e.remove(n),o&&e.isEmpty(o)&&e.remove(o)},Oa=function(e,n){var r=e.dom,o=e.selection.getStart(),s=Se(e,o),l=r.getParent(o,r.isBlock,s);if(l&&r.isEmpty(l)){var m=Je(e.selection.getRng()),h=r.getParent(Br(e,m,n,s),"LI",s);if(h)return e.undoManager.transact(function(){Da(r,l,s),br(r,h.parentNode),e.selection.select(h,!0),e.selection.collapse(n)}),!0}return!1},Ia=function(e,n){return wa(e,n)||Oa(e,n)},Na=function(e){var n=e.selection.getStart(),r=Se(e,n),o=e.dom.getParent(n,"LI,DT,DD",r);return o||Lt(e).length>0?(e.undoManager.transact(function(){e.execCommand("Delete"),ya(e.dom,e.getBody())}),!0):!1},Sr=function(e,n){return e.selection.isCollapsed()?Ia(e,n):Na(e)},ka=function(e){e.on("keydown",function(n){n.keyCode===ie.BACKSPACE?Sr(e,!1)&&n.preventDefault():n.keyCode===ie.DELETE&&Sr(e,!0)&&n.preventDefault()})},_a=function(e){return{backspaceDelete:function(n){Sr(e,n)}}},Ua=function(e,n){var r=De(e);e.undoManager.transact(function(){re(n.styles)&&e.dom.setStyles(r,n.styles),re(n.attrs)&&he(n.attrs,function(o,s){return e.dom.setAttrib(r,s,o)})})},Mr=function(e){var n=_(An(e).split("")),r=k(n,function(o,s){var l=o.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,s)*l});return Ne(r,function(o,s){return o+s},0)},Tr=function(e){if(e--,e<0)return"";var n=e%26,r=Math.floor(e/26),o=Tr(r),s=String.fromCharCode("A".charCodeAt(0)+n);return o+s},$a=function(e){return/^[A-Z]+$/.test(e)},Pa=function(e){return/^[a-z]+$/.test(e)},Ba=function(e){return/^[0-9]+$/.test(e)},Ea=function(e){return Ba(e)?2:$a(e)?0:Pa(e)?1:Dn(e)?3:4},Ma=function(e){switch(Ea(e)){case 2:return O.some({listStyleType:O.none(),start:e});case 0:return O.some({listStyleType:O.some("upper-alpha"),start:Mr(e).toString()});case 1:return O.some({listStyleType:O.some("lower-alpha"),start:Mr(e).toString()});case 3:return O.some({listStyleType:O.none(),start:""});case 4:return O.none()}},Ra=function(e){var n=parseInt(e.start,10);return fn(e.listStyleType,"upper-alpha")?Tr(n):fn(e.listStyleType,"lower-alpha")?Tr(n).toLowerCase():e.start},xa=function(e){var n=De(e);tn(n)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ra({start:e.dom.getAttrib(n,"start","1"),listStyleType:O.some(e.dom.getStyle(n,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(r){var o=r.getData();Ma(o.start).each(function(s){e.execCommand("mceListUpdate",!1,{attrs:{start:s.start==="1"?"":s.start},styles:{"list-style-type":s.listStyleType.getOr("")}})}),r.close()}})},Lr=function(e,n){return function(){var r=De(e);return r&&r.nodeName===n}},Rr=function(e){e.addCommand("mceListProps",function(){xa(e)})},Ha=function(e){e.on("BeforeExecCommand",function(n){var r=n.command.toLowerCase();r==="indent"?Ir(e):r==="outdent"&&pr(e)}),e.addCommand("InsertUnorderedList",function(n,r){yr(e,"UL",r)}),e.addCommand("InsertOrderedList",function(n,r){yr(e,"OL",r)}),e.addCommand("InsertDefinitionList",function(n,r){yr(e,"DL",r)}),e.addCommand("RemoveList",function(){pn(e)}),Rr(e),e.addCommand("mceListUpdate",function(n,r){re(r)&&Ua(e,r)}),e.addQueryStateHandler("InsertUnorderedList",Lr(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Lr(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Lr(e,"DL"))},za=function(e){e.on("keydown",function(n){n.keyCode!==ie.TAB||ie.metaKeyPressed(n)||e.undoManager.transact(function(){(n.shiftKey?pr(e):Ir(e))&&n.preventDefault()})})},Fa=function(e){Gn(e)&&za(e),ka(e)},Va=function(e){var n=function(r){return function(){return e.execCommand(r)}};e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:n("InsertOrderedList"),onSetup:function(r){return gr(e,"OL",r.setActive)}}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:n("InsertUnorderedList"),onSetup:function(r){return gr(e,"UL",r.setActive)}}))},ja=function(e){var n={text:"List properties...",icon:"ordered-list",onAction:function(){return e.execCommand("mceListProps")},onSetup:function(r){return gr(e,"OL",function(o){return r.setDisabled(!o)})}};e.ui.registry.addMenuItem("listprops",n),e.ui.registry.addContextMenu("lists",{update:function(r){var o=De(e,r);return tn(o)?["listprops"]:[]}})};function qa(){d.add("lists",function(e){return e.hasPlugin("rtc",!0)===!1?(Fa(e),Ha(e)):Rr(e),Va(e),ja(e),_a(e)})}qa()})();(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(v,b,A){var w=b==="UL"?"InsertUnorderedList":"InsertOrderedList";v.execCommand(w,!1,A===!1?null:{"list-style-type":A})},$=function(v){v.addCommand("ApplyUnorderedListStyle",function(b,A){p(v,"UL",A["list-style-type"])}),v.addCommand("ApplyOrderedListStyle",function(b,A){p(v,"OL",A["list-style-type"])})},P=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(v){var b=v.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return b?b.split(/[ ,]/):[]},re=function(v){var b=v.getParam("advlist_bullet_styles","default,circle,square");return b?b.split(/[ ,]/):[]},N=function(){},C=function(v){return function(){return v}},D=function(v){return v},j=C(!1),le=C(!0),L=function(){return ce},ce=function(){var v=function(w){return w()},b=D,A={fold:function(w,_){return w()},isSome:j,isNone:le,getOr:b,getOrThunk:v,getOrDie:function(w){throw new Error(w||"error: getOrDie called on none.")},getOrNull:C(null),getOrUndefined:C(void 0),or:b,orThunk:v,map:L,each:N,bind:L,exists:j,forall:le,filter:function(){return L()},toArray:function(){return[]},toString:C("none()")};return A}(),Oe=function(v){var b=C(v),A=function(){return _},w=function(U){return U(v)},_={fold:function(U,J){return J(v)},isSome:le,isNone:j,getOr:b,getOrThunk:b,getOrDie:b,getOrNull:b,getOrUndefined:b,or:A,orThunk:A,map:function(U){return Oe(U(v))},each:function(U){U(v)},bind:w,exists:w,forall:w,filter:function(U){return U(v)?_:ce},toArray:function(){return[v]},toString:function(){return"some("+v+")"}};return _},je=function(v){return v==null?ce:Oe(v)},fe={some:Oe,none:L,from:je},K=function(v,b){return v.$.contains(v.getBody(),b)},Le=function(v){return v&&/^(TH|TD)$/.test(v.nodeName)},ve=function(v){return function(b){return b&&/^(OL|UL|DL)$/.test(b.nodeName)&&K(v,b)}},de=function(v){var b=v.dom.getParent(v.selection.getNode(),"ol,ul"),A=v.dom.getStyle(b,"listStyleType");return fe.from(A)},Ae=function(v,b){for(var A=0;A<v.length;A++){var w=v[A];if(b(w))return A}return-1},O=function(v){return v.replace(/\-/g," ").replace(/\b\w/g,function(b){return b.toUpperCase()})},Ie=function(v,b,A){var w=Ae(b.parents,Le),_=w!==-1?b.parents.slice(0,w):b.parents,U=P.grep(_,ve(v));return U.length>0&&U[0].nodeName===A},qe=function(v,b){return function(A){var w=function(_){A.setActive(Ie(v,_,b))};return v.on("NodeChange",w),function(){return v.off("NodeChange",w)}}},k=function(v,b,A,w,_,U){v.ui.registry.addSplitButton(b,{tooltip:A,icon:_==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(J){var Q=P.map(U,function(X){var ke=_==="OL"?"num":"bull",We=X==="disc"||X==="decimal"?"default":X,Ye=X==="default"?"":X,et=O(X);return{type:"choiceitem",value:Ye,icon:"list-"+ke+"-"+We,text:et}});J(Q)},onAction:function(){return v.execCommand(w)},onItemAction:function(J,Q){p(v,_,Q)},select:function(J){var Q=de(v);return Q.map(function(X){return J===X}).getOr(!1)},onSetup:qe(v,_)})},z=function(v,b,A,w,_,U){v.ui.registry.addToggleButton(b,{active:!1,tooltip:A,icon:_==="OL"?"ordered-list":"unordered-list",onSetup:qe(v,_),onAction:function(){return v.execCommand(w)}})},ee=function(v,b,A,w,_,U){U.length>1?k(v,b,A,w,_,U):z(v,b,A,w,_)},Ze=function(v){ee(v,"numlist","Numbered list","InsertOrderedList","OL",R(v)),ee(v,"bullist","Bullet list","InsertUnorderedList","UL",re(v))};function Ne(){d.add("advlist",function(v){v.hasPlugin("lists")?(Ze(v),$(v)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}Ne()})();(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=function(){return p=Object.assign||function(a){for(var i,u=1,c=arguments.length;u<c;u++){i=arguments[u];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(a[g]=i[g])}return a},p.apply(this,arguments)},$=function(t){var a=typeof t;return t===null?"null":a==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":a==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":a},P=function(t){return function(a){return $(a)===t}},R=function(t){return function(a){return typeof a===t}},re=function(t){return function(a){return t===a}},N=P("string"),C=P("object"),D=P("array"),j=re(null),le=R("boolean"),L=function(t){return t==null},ce=function(t){return!L(t)},Oe=R("function"),je=R("number"),fe=function(){},K=function(t){return function(){return t}},Le=function(t){return t},ve=K(!1),de=K(!0),Ae=function(){return O},O=function(){var t=function(u){return u()},a=Le,i={fold:function(u,c){return u()},isSome:ve,isNone:de,getOr:a,getOrThunk:t,getOrDie:function(u){throw new Error(u||"error: getOrDie called on none.")},getOrNull:K(null),getOrUndefined:K(void 0),or:a,orThunk:t,map:Ae,each:fe,bind:Ae,exists:ve,forall:de,filter:function(){return Ae()},toArray:function(){return[]},toString:K("none()")};return i}(),Ie=function(t){var a=K(t),i=function(){return c},u=function(g){return g(t)},c={fold:function(g,S){return S(t)},isSome:de,isNone:ve,getOr:a,getOrThunk:a,getOrDie:a,getOrNull:a,getOrUndefined:a,or:i,orThunk:i,map:function(g){return Ie(g(t))},each:function(g){g(t)},bind:u,exists:u,forall:u,filter:function(g){return g(t)?c:O},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return c},qe=function(t){return t==null?O:Ie(t)},k={some:Ie,none:Ae,from:qe},z=Object.keys,ee=Object.hasOwnProperty,Ze=function(t,a){for(var i=z(t),u=0,c=i.length;u<c;u++){var g=i[u],S=t[g];a(S,g)}},Ne=function(t){return function(a,i){t[i]=a}},v=function(t,a,i,u){var c={};return Ze(t,function(g,S){(a(g,S)?i:u)(g,S)}),c},b=function(t,a){var i={};return v(t,a,Ne(i),fe),i},A=function(t,a){return ee.call(t,a)},w=function(t,a){return A(t,a)&&t[a]!==void 0&&t[a]!==null},_=Array.prototype.push,U=function(t){for(var a=[],i=0,u=t.length;i<u;++i){if(!D(t[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+t);_.apply(a,t[i])}return a},J=function(t,a){return a>=0&&a<t.length?k.some(t[a]):k.none()},Q=function(t){return J(t,0)},X=function(t,a){for(var i=0;i<t.length;i++){var u=a(t[i],i);if(u.isSome())return u}return k.none()};typeof window<"u"||Function("return this;")();var ke=function(t,a,i){if(N(i)||le(i)||je(i))t.setAttribute(a,i+"");else throw console.error("Invalid call to Attribute.set. Key ",a,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple")},We=function(t,a,i){ke(t.dom,a,i)},Ye=function(t,a){t.dom.removeAttribute(a)},et=function(t,a){var i=a||document,u=i.createElement("div");if(u.innerHTML=t,!u.hasChildNodes()||u.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return _e(u.childNodes[0])},Cn=function(t,a){var i=a||document,u=i.createElement(t);return _e(u)},Sn=function(t,a){var i=a||document,u=i.createTextNode(t);return _e(u)},_e=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},It=function(t,a,i){return k.from(t.dom.elementFromPoint(a,i)).map(_e)},Ue={fromHtml:et,fromTag:Cn,fromText:Sn,fromDom:_e,fromPoint:It},$e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ae=tinymce.util.Tools.resolve("tinymce.util.Promise"),Nt=tinymce.util.Tools.resolve("tinymce.util.URI"),Tn=tinymce.util.Tools.resolve("tinymce.util.XHR"),kt=function(t){return t.getParam("image_dimensions",!0,"boolean")},x=function(t){return t.getParam("image_advtab",!1,"boolean")},Ln=function(t){return t.getParam("image_uploadtab",!0,"boolean")},An=function(t){return t.getParam("image_prepend_url","","string")},wn=function(t){return t.getParam("image_class_list")},Dn=function(t){return t.getParam("image_description",!0,"boolean")},tt=function(t){return t.getParam("image_title",!1,"boolean")},te=function(t){return t.getParam("image_caption",!1,"boolean")},On=function(t){return t.getParam("image_list",!1)},In=function(t){return ce(t.getParam("images_upload_url"))},_t=function(t){return ce(t.getParam("images_upload_handler"))},Ut=function(t){return t.getParam("a11y_advanced_options",!1,"boolean")},$t=function(t){return t.getParam("automatic_uploads",!0,"boolean")},nt=function(t,a){return Math.max(parseInt(t,10),parseInt(a,10))},Pt=function(t){return new ae(function(a){var i=document.createElement("img"),u=function(g){i.onload=i.onerror=null,i.parentNode&&i.parentNode.removeChild(i),a(g)};i.onload=function(){var g=nt(i.width,i.clientWidth),S=nt(i.height,i.clientHeight),H={width:g,height:S};u(ae.resolve(H))},i.onerror=function(){u(ae.reject("Failed to get image dimensions for: "+t))};var c=i.style;c.visibility="hidden",c.position="fixed",c.bottom=c.left="0px",c.width=c.height="auto",document.body.appendChild(i),i.src=t})},oe=function(t){return t&&(t=t.replace(/px$/,"")),t},Pe=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},Bt=function(t){if(t.margin){var a=String(t.margin).split(" ");switch(a.length){case 1:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[0],t["margin-bottom"]=t["margin-bottom"]||a[0],t["margin-left"]=t["margin-left"]||a[0];break;case 2:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[0],t["margin-left"]=t["margin-left"]||a[1];break;case 3:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[2],t["margin-left"]=t["margin-left"]||a[1];break;case 4:t["margin-top"]=t["margin-top"]||a[0],t["margin-right"]=t["margin-right"]||a[1],t["margin-bottom"]=t["margin-bottom"]||a[2],t["margin-left"]=t["margin-left"]||a[3]}delete t.margin}return t},Et=function(t,a){var i=On(t);N(i)?Tn.send({url:i,success:function(u){a(JSON.parse(u))}}):Oe(i)?i(a):a(i)},Mt=function(t,a,i){var u=function(){i.onload=i.onerror=null,t.selection&&(t.selection.select(i),t.nodeChanged())};i.onload=function(){!a.width&&!a.height&&kt(t)&&t.dom.setAttribs(i,{width:String(i.clientWidth),height:String(i.clientHeight)}),u()},i.onerror=u},Rt=function(t){return new ae(function(a,i){var u=new FileReader;u.onload=function(){a(u.result)},u.onerror=function(){i(u.error.message)},u.readAsDataURL(t)})},rt=function(t){return t.nodeName==="IMG"&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},at=function(t,a){return Nt.isDomSafe(a,"img",t.settings)},F=$e.DOM,ot=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?oe(t.style.marginLeft):""},it=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?oe(t.style.marginTop):""},st=function(t){return t.style.borderWidth?oe(t.style.borderWidth):""},me=function(t,a){return t.hasAttribute(a)?t.getAttribute(a):""},xt=function(t,a){return t.style[a]?t.style[a]:""},ut=function(t){return t.parentNode!==null&&t.parentNode.nodeName==="FIGURE"},pe=function(t,a,i){i===""?t.removeAttribute(a):t.setAttribute(a,i)},Nn=function(t){var a=F.create("figure",{class:"image"});F.insertAfter(a,t),a.appendChild(t),a.appendChild(F.create("figcaption",{contentEditable:"true"},"Caption")),a.contentEditable="false"},kn=function(t){var a=t.parentNode;F.insertAfter(t,a),F.remove(a)},_n=function(t){ut(t)?kn(t):Nn(t)},Ht=function(t,a){var i=t.getAttribute("style"),u=a(i!==null?i:"");u.length>0?(t.setAttribute("style",u),t.setAttribute("data-mce-style",u)):t.removeAttribute("style")},zt=function(t,a){return function(i,u,c){i.style[u]?(i.style[u]=Pe(c),Ht(i,a)):pe(i,u,c)}},Ft=function(t,a){return t.style[a]?oe(t.style[a]):me(t,a)},Vt=function(t,a){var i=Pe(a);t.style.marginLeft=i,t.style.marginRight=i},lt=function(t,a){var i=Pe(a);t.style.marginTop=i,t.style.marginBottom=i},jt=function(t,a){var i=Pe(a);t.style.borderWidth=i},qt=function(t,a){t.style.borderStyle=a},Un=function(t){return xt(t,"borderStyle")},ge=function(t){return t.nodeName==="FIGURE"},$n=function(t){return t.nodeName==="IMG"},B=function(t){return F.getAttrib(t,"alt").length===0&&F.getAttrib(t,"role")==="presentation"},Pn=function(t){return B(t)?"":me(t,"alt")},ct=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Bn=function(t,a){var i=document.createElement("img");return pe(i,"style",a.style),(ot(i)||a.hspace!=="")&&Vt(i,a.hspace),(it(i)||a.vspace!=="")&&lt(i,a.vspace),(st(i)||a.border!=="")&&jt(i,a.border),(Un(i)||a.borderStyle!=="")&&qt(i,a.borderStyle),t(i.getAttribute("style"))},En=function(t,a){var i=document.createElement("img");if(Wt(t,p(p({},a),{caption:!1}),i),vt(i,a.alt,a.isDecorative),a.caption){var u=F.create("figure",{class:"image"});return u.appendChild(i),u.appendChild(F.create("figcaption",{contentEditable:"true"},"Caption")),u.contentEditable="false",u}else return i},ft=function(t,a){return{src:me(a,"src"),alt:Pn(a),title:me(a,"title"),width:Ft(a,"width"),height:Ft(a,"height"),class:me(a,"class"),style:t(me(a,"style")),caption:ut(a),hspace:ot(a),vspace:it(a),border:st(a),borderStyle:xt(a,"borderStyle"),isDecorative:B(a)}},q=function(t,a,i,u,c){i[u]!==a[u]&&c(t,u,i[u])},vt=function(t,a,i){if(i){F.setAttrib(t,"role","presentation");var u=Ue.fromDom(t);We(u,"alt","")}else{if(j(a)){var u=Ue.fromDom(t);Ye(u,"alt")}else{var u=Ue.fromDom(t);We(u,"alt",a)}F.getAttrib(t,"role")==="presentation"&&F.setAttrib(t,"role","")}},Mn=function(t,a,i){(i.alt!==a.alt||i.isDecorative!==a.isDecorative)&&vt(t,i.alt,i.isDecorative)},ie=function(t,a){return function(i,u,c){t(i,c),Ht(i,a)}},Wt=function(t,a,i){var u=ft(t,i);q(i,u,a,"caption",function(c,g,S){return _n(c)}),q(i,u,a,"src",pe),q(i,u,a,"title",pe),q(i,u,a,"width",zt("width",t)),q(i,u,a,"height",zt("height",t)),q(i,u,a,"class",pe),q(i,u,a,"style",ie(function(c,g){return pe(c,"style",g)},t)),q(i,u,a,"hspace",ie(Vt,t)),q(i,u,a,"vspace",ie(lt,t)),q(i,u,a,"border",ie(jt,t)),q(i,u,a,"borderStyle",ie(qt,t)),Mn(i,u,a)},he=function(t,a){var i=t.dom.styles.parse(a),u=Bt(i),c=t.dom.styles.parse(t.dom.styles.serialize(u));return t.dom.styles.serialize(c)},Ge=function(t){var a=t.selection.getNode(),i=t.dom.getParent(a,"figure.image");return i?t.dom.select("img",i)[0]:a&&(a.nodeName!=="IMG"||rt(a))?null:a},Gt=function(t,a){var i=t.dom,u=b(t.schema.getTextBlockElements(),function(g,S){return!t.schema.isValidChild(S,"figure")}),c=i.getParent(a.parentNode,function(g){return w(u,g.nodeName)},t.getBody());return c?i.split(c,a):a},Rn=function(t){var a=Ge(t);return a?ft(function(i){return he(t,i)},a):ct()},dt=function(t,a){var i=En(function(g){return he(t,g)},a);t.dom.setAttrib(i,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(i.outerHTML);var u=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(u,"data-mce-id",null),ge(u)){var c=Gt(t,u);t.selection.select(c)}else t.selection.select(u)},xn=function(t,a){t.dom.setAttrib(a,"src",a.getAttribute("src"))},Hn=function(t,a){if(a){var i=t.dom.is(a.parentNode,"figure.image")?a.parentNode:a;t.dom.remove(i),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}},Kt=function(t,a){var i=Ge(t);if(Wt(function(c){return he(t,c)},a,i),xn(t,i),ge(i.parentNode)){var u=i.parentNode;Gt(t,u),t.selection.select(i.parentNode)}else t.selection.select(i),Mt(t,a,i)},Jt=function(t,a){var i=a.src;return p(p({},a),{src:at(t,i)?i:""})},zn=function(t,a){var i=Ge(t);if(i){var u=ft(function(S){return he(t,S)},i),c=p(p({},u),a),g=Jt(t,c);c.src?Kt(t,g):Hn(t,i)}else a.src&&dt(t,p(p({},ct()),a))},Be=function(t,a){var i=C(t)&&C(a);return i?be(t,a):a},mt=function(t){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(a.length===0)throw new Error("Can't merge zero objects");for(var u={},c=0;c<a.length;c++){var g=a[c];for(var S in g)A(g,S)&&(u[S]=t(u[S],g[S]))}return u}},be=mt(Be),pt=function(t){return t.length>0},Qt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),gt=tinymce.util.Tools.resolve("tinymce.util.Tools"),ht=function(t){return N(t.value)?t.value:""},Xt=function(t){return N(t.text)?t.text:N(t.title)?t.title:""},Ee=function(t,a){var i=[];return gt.each(t,function(u){var c=Xt(u);if(u.menu!==void 0){var g=Ee(u.menu,a);i.push({text:c,items:g})}else{var S=a(u);i.push({text:c,value:S})}}),i},Zt=function(t){return t===void 0&&(t=ht),function(a){return a?k.from(a).map(function(i){return Ee(i,t)}):k.none()}},bt=function(t){return Zt(ht)(t)},Yt=function(t){return A(t,"items")},en=function(t,a){return X(t,function(i){return Yt(i)?en(i.items,a):i.value===a?k.some(i):k.none()})},Fn=function(t,a){return t.bind(function(i){return en(i,a)})},we={sanitizer:Zt,sanitize:bt,findEntry:Fn},yt=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Ct={makeTab:yt},Z=function(t){var a=we.sanitizer(function(V){return t.convertURL(V.value||V.url,"src")}),i=new ae(function(V){Et(t,function(dn){V(a(dn).map(function(dr){return U([[{text:"None",value:""}],dr])}))})}),u=we.sanitize(wn(t)),c=x(t),g=Ln(t),S=In(t),H=_t(t),ue=Rn(t),Te=Dn(t),G=tt(t),Re=kt(t),lr=te(t),cr=Ut(t),fr=$t(t),vr=k.some(An(t)).filter(function(V){return N(V)&&V.length>0});return i.then(function(V){return{image:ue,imageList:V,classList:u,hasAdvTab:c,hasUploadTab:g,hasUploadUrl:S,hasUploadHandler:H,hasDescription:Te,hasImageTitle:G,hasDimensions:Re,hasImageCaption:lr,prependURL:vr,hasAccessibilityOptions:cr,automaticUploads:fr}})},St=function(t){var a={name:"src",type:"urlinput",filetype:"image",label:"Source"},i=t.imageList.map(function(G){return{name:"images",type:"listbox",label:"Image list",items:G}}),u={name:"alt",type:"input",label:"Alternative description",disabled:t.hasAccessibilityOptions&&t.image.isDecorative},c={name:"title",type:"input",label:"Image title"},g={name:"dimensions",type:"sizeinput"},S={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},H=t.classList.map(function(G){return{name:"classes",type:"listbox",label:"Class",items:G}}),ue={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Te=function(G){return G?{type:"grid",columns:2}:{type:"panel"}};return U([[a],i.toArray(),t.hasAccessibilityOptions&&t.hasDescription?[S]:[],t.hasDescription?[u]:[],t.hasImageTitle?[c]:[],t.hasDimensions?[g]:[],[p(p({},Te(t.classList.isSome()&&t.hasImageCaption)),{items:U([H.toArray(),t.hasImageCaption?[ue]:[]])})]])},Me=function(t){return{title:"General",name:"general",items:St(t)}},ye={makeTab:Me,makeItems:St},W=function(t){var a=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:a}},Vn={makeTab:W},tn=function(t){return{prevImage:we.findEntry(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}},Ke=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[],isDecorative:t.isDecorative}},nn=function(t,a){return{src:t.src.value,alt:t.alt.length===0&&a?null:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle,isDecorative:t.isDecorative}},jn=function(t,a){return/^(?:[a-zA-Z]+:)?\/\//.test(a)?k.none():t.prependURL.bind(function(i){return a.substring(0,i.length)!==i?k.some(i+a):k.none()})},Ce=function(t,a){var i=a.getData();jn(t,i.src.value).each(function(u){a.setData({src:{value:u,meta:i.src.meta}})})},qn=function(t,a,i){t.hasDescription&&N(i.alt)&&(a.alt=i.alt),t.hasAccessibilityOptions&&(a.isDecorative=i.isDecorative||a.isDecorative||!1),t.hasImageTitle&&N(i.title)&&(a.title=i.title),t.hasDimensions&&(N(i.width)&&(a.dimensions.width=i.width),N(i.height)&&(a.dimensions.height=i.height)),N(i.class)&&we.findEntry(t.classList,i.class).each(function(u){a.classes=u.value}),t.hasImageCaption&&le(i.caption)&&(a.caption=i.caption),t.hasAdvTab&&(N(i.style)&&(a.style=i.style),N(i.vspace)&&(a.vspace=i.vspace),N(i.border)&&(a.border=i.border),N(i.hspace)&&(a.hspace=i.hspace),N(i.borderstyle)&&(a.borderstyle=i.borderstyle))},Tt=function(t,a){var i=a.getData(),u=i.src.meta;if(u!==void 0){var c=be({},i);qn(t,c,u),a.setData(c)}},rn=function(t,a,i,u){var c=u.getData(),g=c.src.value,S=c.src.meta||{};!S.width&&!S.height&&a.hasDimensions&&(pt(g)?t.imageSize(g).then(function(H){i.open&&u.setData({dimensions:H})}).catch(function(H){return console.error(H)}):u.setData({dimensions:{width:"",height:""}}))},Wn=function(t,a,i){var u=i.getData(),c=we.findEntry(t.imageList,u.src.value);a.prevImage=c,i.setData({images:c.map(function(g){return g.value}).getOr("")})},ne=function(t,a,i,u){Ce(a,u),Tt(a,u),rn(t,a,i,u),Wn(a,i,u)},an=function(t,a,i,u){var c=u.getData(),g=we.findEntry(a.imageList,c.images);g.each(function(S){var H=c.alt===""||i.prevImage.map(function(ue){return ue.text===c.alt}).getOr(!1);H?S.value===""?u.setData({src:S,alt:i.prevAlt}):u.setData({src:S,alt:S.text}):u.setData({src:S})}),i.prevImage=g,ne(t,a,i,u)},Gn=function(t){var a=t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"];return a?oe(String(t["margin-top"])):""},Kn=function(t){var a=t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"];return a?oe(String(t["margin-right"])):""},Jn=function(t){return t["border-width"]?oe(String(t["border-width"])):""},on=function(t){return t["border-style"]?String(t["border-style"]):""},se=function(t,a,i){return a(t(a(i)))},Qn=function(t,a,i){var u=Bt(t(i.style)),c=be({},i);return c.vspace=Gn(u),c.hspace=Kn(u),c.border=Jn(u),c.borderstyle=on(u),c.style=se(t,a,u),c},Xn=function(t,a){var i=a.getData(),u=Qn(t.parseStyle,t.serializeStyle,i);a.setData(u)},sn=function(t,a,i){var u=be(Ke(a.image),i.getData()),c=Bn(t.normalizeCss,nn(u,!1));i.setData({style:c})},Zn=function(t,a,i,u){var c=u.getData();u.block("Uploading image"),Q(c.fileinput).fold(function(){u.unblock()},function(g){var S=URL.createObjectURL(g),H=function(){u.unblock(),URL.revokeObjectURL(S)},ue=function(Te){u.setData({src:{value:Te,meta:{}}}),u.showTab("general"),ne(t,a,i,u)};Rt(g).then(function(Te){var G=t.createBlobCache(g,S,Te);a.automaticUploads?t.uploadImage(G).then(function(Re){ue(Re.url),H()}).catch(function(Re){H(),t.alertErr(Re)}):(t.addToBlobCache(G),ue(G.blobUri()),u.unblock())})})},Yn=function(t,a,i){return function(u,c){c.name==="src"?ne(t,a,i,u):c.name==="images"?an(t,a,i,u):c.name==="alt"?i.prevAlt=u.getData().alt:c.name==="style"?Xn(t,u):c.name==="vspace"||c.name==="hspace"||c.name==="border"||c.name==="borderstyle"?sn(t,a,u):c.name==="fileinput"?Zn(t,a,i,u):c.name==="isDecorative"&&(u.getData().isDecorative?u.disable("alt"):u.enable("alt"))}},er=function(t){return function(){t.open=!1}},un=function(t){if(t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler){var a={type:"tabpanel",tabs:U([[ye.makeTab(t)],t.hasAdvTab?[Ct.makeTab(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Vn.makeTab(t)]:[]])};return a}else{var i={type:"panel",items:ye.makeItems(t)};return i}},Je=function(t){return function(a){var i=tn(a);return{title:"Insert/Edit Image",size:"normal",body:un(a),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ke(a.image),onSubmit:t.onSubmit(a),onChange:Yn(t,a,i),onClose:er(i)}}},ln=function(t){return function(a){return function(i){var u=be(Ke(a.image),i.getData());t.execCommand("mceUpdateImage",!1,nn(u,a.hasAccessibilityOptions)),t.editorUpload.uploadImagesAuto(),i.close()}}},De=function(t){return function(a){return at(t,a)?Pt(t.documentBaseURI.toAbsolute(a)).then(function(i){return{width:String(i.width),height:String(i.height)}}):ae.resolve({width:"",height:""})}},tr=function(t){return function(a,i,u){return t.editorUpload.blobCache.create({blob:a,blobUri:i,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,filename:a.name,base64:u.split(",")[1]})}},nr=function(t){return function(a){t.editorUpload.blobCache.add(a)}},rr=function(t){return function(a){t.windowManager.alert(a)}},ar=function(t){return function(a){return he(t,a)}},Lt=function(t){return function(a){return t.dom.parseStyle(a)}},or=function(t){return function(a,i){return t.dom.serializeStyle(a,i)}},Se=function(t){return function(a){return Qt(t).upload([a],!1).then(function(i){return i.length===0?ae.reject("Failed to upload image"):i[0].status===!1?ae.reject(i[0].error.message):i[0]})}},Qe=function(t){var a={onSubmit:ln(t),imageSize:De(t),addToBlobCache:nr(t),createBlobCache:tr(t),alertErr:rr(t),normalizeCss:ar(t),parseStyle:Lt(t),serializeStyle:or(t),uploadImage:Se(t)},i=function(){Z(t).then(Je(a)).then(t.windowManager.open)};return{open:i}},ir=function(t){t.addCommand("mceImage",Qe(t).open),t.addCommand("mceUpdateImage",function(a,i){t.undoManager.transact(function(){return zn(t,i)})})},sr=function(t){var a=t.attr("class");return a&&/\bimage\b/.test(a)},cn=function(t){return function(a){for(var i=a.length,u=function(g){g.attr("contenteditable",t?"true":null)};i--;){var c=a[i];sr(c)&&(c.attr("contenteditable",t?"false":null),gt.each(c.getAll("figcaption"),u))}}},fn=function(t){t.on("PreInit",function(){t.parser.addNodeFilter("figure",cn(!0)),t.serializer.addNodeFilter("figure",cn(!1))})},vn=function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Qe(t).open,onSetup:function(a){return a.setActive(ce(Ge(t))),t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",a.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Qe(t).open}),t.ui.registry.addContextMenu("image",{update:function(a){return ge(a)||$n(a)&&!rt(a)?["image"]:[]}})};function ur(){d.add("image",function(t){fn(t),vn(t),ir(t)})}ur()})();const Za={data(){return{init:{language:"zh_TW",height:150,menubar:!1,content_css:!1,skin:!1,plugins:this.plugins,toolbar:this.toolbar,quickbars_insert_toolbar:!1,branding:!1}}},components:{Editor:Qa},props:{adminCourseModal:{},value:{type:String,default:""},plugins:{type:[String,Array],default:"quickbars lists advlist image emoticons table"},toolbar:{type:[String,Array],default:"bold italic underline | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify| bullist numlist |outdent indent | undo redo | axupimgs | removeformat | emoticons |table |image rotateleft rotateright | imageoptions"}},methods:{...zr(yn,["addCourse","editCourse","uploadImage","uploadImages","clearInputs","selectTempCourse"])},computed:{...Fr(yn,["tempCourse"])},mounted(){Xa.init({})}},Ya={class:"modal-dialog modal-xl"},eo={class:"modal-content border-0"},to={class:"modal-header bg-dark text-white"},no={id:"courseModalLabel",class:"modal-title"},ro={key:0},ao={key:1},oo={key:2},io={key:3},so={class:"modal-body"},uo={class:"row"},lo={class:"col-sm-4 mb-4"},co={class:"mb-2"},fo={class:"mb-3"},vo=f("h6",null,"列表圖片",-1),mo={enctype:"multipart/form-data",method:"post"},po=["src"],go={class:"mb-2"},ho=f("h6",null,"內容圖片",-1),bo={class:"mb-2"},yo=["onUpdate:modelValue","id"],Co={enctype:"multipart/form-data",method:"post"},So=["id","onChange"],To=["src"],Lo={class:"col-sm-8"},Ao={class:"row"},wo={class:"mb-3 col-md-6"},Do=f("label",{for:"title",class:"form-label"},"標題",-1),Oo={class:"mb-3 col-md-6"},Io=f("label",{for:"price",class:"form-label"},"小圖示",-1),No=f("a",{href:"https://fonts.google.com/icons?icon.platform=android",target:"_blank",class:"text-decoration-underline"},"圖示庫",-1),ko={class:"material-symbols-outlined"},_o={class:"row"},Uo={class:"mb-3 col-md-6"},$o=f("label",{for:"price",class:"form-label"},"價格",-1),Po=f("hr",null,null,-1),Bo={class:"mb-3"},Eo=f("label",{for:"description",class:"form-label"},"簡述",-1),Mo={class:"mb-3"},Ro=f("label",{for:"content",class:"form-label"},"說明內容",-1),xo={class:"mb-3"},Ho={class:"form-check"},zo=f("label",{class:"form-check-label",for:"needSession"}," 須預約時段 ",-1),Fo={class:"form-check"},Vo=f("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),jo={class:"modal-footer"};function qo(d,p,$,P,R,re){const N=Ar("editor");return E(),M("div",Ya,[f("div",eo,[f("div",to,[f("h5",no,[d.tempCourse.id&&d.tempCourse.category=="service"?(E(),M("span",ro,"編輯服務")):d.tempCourse.id&&d.tempCourse.category=="course"?(E(),M("span",ao,"編輯課程")):!d.tempCourse.id&&d.tempCourse.category=="service"?(E(),M("span",oo,"新增服務")):(E(),M("span",io,"新增課程"))]),f("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p[0]||(p[0]=C=>d.clearInputs())})]),f("div",so,[f("div",uo,[f("div",lo,[f("div",co,[f("div",fo,[vo,He(f("input",{id:"imageUrl","onUpdate:modelValue":p[1]||(p[1]=C=>d.tempCourse.imageUrl=C),type:"text",class:"form-control form-control-sm mb-2",placeholder:"請輸入圖片連結"},null,512),[[Dt,d.tempCourse.imageUrl]]),f("form",mo,[f("input",{type:"file",name:"file-to-upload",id:"imageUpload",ref:"file",placeholder:"請選擇圖片",onChange:p[2]||(p[2]=C=>d.uploadImage()),class:"form-control"},null,544)])]),f("img",{class:"img-fluid",src:d.tempCourse.imageUrl,alt:""},null,8,po)]),f("div",go,[ho,(E(!0),M(bn,null,wr(d.tempCourse.imagesUrl,(C,D)=>(E(),M("div",{key:D,class:"mb-3"},[f("div",bo,[He(f("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":j=>d.tempCourse.imagesUrl[D]=j,id:`imageUrl-${D}`},null,8,yo),[[Dt,d.tempCourse.imagesUrl[D]]]),f("form",Co,[f("input",{type:"file",name:"file-to-upload",id:`imagesUpload-${D}`,class:"form-control imagesUpload",ref_for:!0,ref:"file",placeholder:"請選擇圖片",onChange:j=>d.uploadImages(D)},null,40,So)])]),f("img",{class:"img-fluid",src:C,alt:""},null,8,To)]))),128))]),f("div",null,[f("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:p[3]||(p[3]=C=>d.tempCourse.imagesUrl.length>1?d.tempCourse.imagesUrl.pop():d.tempCourse.imagesUrl[0]="")}," 刪除圖片 "),f("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:p[4]||(p[4]=C=>d.tempCourse.imagesUrl.push(""))}," 新增次要圖片 ")])]),f("div",Lo,[f("div",Ao,[f("div",wo,[Do,He(f("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":p[5]||(p[5]=C=>d.tempCourse.title=C)},null,512),[[Dt,d.tempCourse.title]])]),f("div",Oo,[Io,xr(" ("),No,xr(") "),He(f("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入圖示名稱","onUpdate:modelValue":p[6]||(p[6]=C=>d.tempCourse.unit=C)},null,512),[[Dt,d.tempCourse.unit]]),f("span",ko,Ve(d.tempCourse.unit),1)])]),f("div",_o,[f("div",Uo,[$o,He(f("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入價格","onUpdate:modelValue":p[7]||(p[7]=C=>d.tempCourse.price=C)},null,512),[[Dt,d.tempCourse.price]])])]),Po,f("div",Bo,[Eo,Ot(N,{modelValue:d.tempCourse.description,"onUpdate:modelValue":p[8]||(p[8]=C=>d.tempCourse.description=C),init:R.init},null,8,["modelValue","init"])]),f("div",Mo,[Ro,Ot(N,{modelValue:d.tempCourse.content,"onUpdate:modelValue":p[9]||(p[9]=C=>d.tempCourse.content=C),init:R.init},null,8,["modelValue","init"])]),f("div",xo,[f("div",Ho,[He(f("input",{class:"form-check-input",type:"checkbox",value:"",id:"needSession","true-value":1,"false-value":0,"onUpdate:modelValue":p[10]||(p[10]=C=>d.tempCourse.origin_price=C)},null,512),[[Hr,d.tempCourse.origin_price]]),zo]),f("div",Fo,[He(f("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":p[11]||(p[11]=C=>d.tempCourse.is_enabled=C)},null,512),[[Hr,d.tempCourse.is_enabled]]),Vo])])])])]),f("div",jo,[f("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:p[12]||(p[12]=C=>{d.clearInputs(),d.selectTempCourse({imagesUrl:[""]})})}," 取消 "),d.tempCourse.id?(E(),M("button",{key:0,type:"button",class:"btn btn-primary",onClick:p[13]||(p[13]=C=>d.editCourse(d.tempCourse,$.adminCourseModal))}," 確認編輯 ")):(E(),M("button",{key:1,type:"button",class:"btn btn-primary",onClick:p[14]||(p[14]=C=>d.addCourse(d.tempCourse,$.adminCourseModal))}," 確認新增 "))])])])}const Wo=Vr(Za,[["render",qo]]),Go={data(){return{adminCourseModal:null}},computed:{...Fr(yn,["tempCourse","courses","services","service_pagination","course_pagination"])},components:{Pagination:Ga,AdminCourseModal:Wo},methods:{...zr(yn,["getAdminCourses","getAdminServices","selectTempCourse","deleteCourse"])},mounted(){this.getAdminServices(),this.getAdminCourses(),this.adminCourseModal=new Ja("#adminCourseModal")}},Ko={class:"container"},Jo={class:"text-end mt-4"},Qo={class:"table mt-4"},Xo=f("thead",null,[f("tr",null,[f("th",null,"服務名稱"),f("th",null,"服務簡述"),f("th",{width:"120"}," 價格 "),f("th",{width:"100"}," 是否啟用 "),f("th",{width:"120"}," 編輯 ")])],-1),Zo={class:"text-end"},Yo={key:0,class:"text-success"},ei={key:1},ti={class:"btn-group"},ni=["onClick"],ri=["onClick"],ai={class:"container"},oi={class:"text-end mt-4"},ii={class:"table mt-4"},si=f("thead",null,[f("tr",null,[f("th",null,"課程名稱"),f("th",null,"課程簡述"),f("th",{width:"120"}," 價格 "),f("th",{width:"100"}," 是否啟用 "),f("th",{width:"120"}," 編輯 ")])],-1),ui={class:"text-end"},li={key:0,class:"text-success"},ci={key:1},fi={class:"btn-group"},vi=["onClick"],di=["onClick"],mi={id:"adminCourseModal",ref:"adminCourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"courseModalLabel","aria-hidden":"true"};function pi(d,p,$,P,R,re){const N=Ar("pagination"),C=Ar("admin-course-modal");return E(),M(bn,null,[f("div",Ko,[f("div",Jo,[f("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:p[0]||(p[0]=D=>d.selectTempCourse({imagesUrl:[""],category:"service",description:"",content:"",origin_price:0}))}," 建立新的服務 ")]),f("table",Qo,[Xo,f("tbody",null,[(E(!0),M(bn,null,wr(d.services,D=>(E(),M("tr",{key:D.id},[f("td",null,Ve(D.title),1),f("td",null,Ve(D.description),1),f("td",Zo,Ve(D.price),1),f("td",null,[D.is_enabled==1?(E(),M("span",Yo,"啟用")):(E(),M("span",ei,"未啟用"))]),f("td",null,[f("div",ti,[f("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:j=>d.selectTempCourse(JSON.parse(JSON.stringify(D)))}," 編輯 ",8,ni),f("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:j=>d.selectTempCourse(D)}," 刪除 ",8,ri)])])]))),128))])]),Ot(N,{pages:d.service_pagination,onChangePage:d.getAdminServices},null,8,["pages","onChangePage"])]),f("div",ai,[f("div",oi,[f("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:p[1]||(p[1]=D=>d.selectTempCourse({imagesUrl:[""],category:"course",description:"",content:"",origin_price:0}))}," 建立新的課程 ")]),f("table",ii,[si,f("tbody",null,[(E(!0),M(bn,null,wr(d.courses,D=>(E(),M("tr",{key:D.id},[f("td",null,Ve(D.title),1),f("td",null,Ve(D.description),1),f("td",ui,Ve(D.price),1),f("td",null,[D.is_enabled==1?(E(),M("span",li,"啟用")):(E(),M("span",ci,"未啟用"))]),f("td",null,[f("div",fi,[f("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#adminCourseModal",onClick:j=>d.selectTempCourse(JSON.parse(JSON.stringify(D)))}," 編輯 ",8,vi),f("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:j=>d.deleteCourse(D.id)}," 刪除 ",8,di)])])]))),128))])]),Ot(N,{pages:d.course_pagination,onChangePage:d.getAdminCourses},null,8,["pages","onChangePage"])]),f("div",mi,[Ot(C,{"admin-course-modal":R.adminCourseModal},null,8,["admin-course-modal"])],512)],64)}const yi=Vr(Go,[["render",pi]]);export{yi as default};
